# å®Œæ•´é“¾è·¯æµ‹è¯•

## æµ‹è¯•ç¯å¢ƒ

```bash
cd backend
python daoyoucode.py chat --skill sisyphus-orchestrator --debug
```

## æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯• 1: ç®€å•é—®å€™ï¼ˆä¸åº”è§¦å‘é¢„å–ï¼‰
**è¾“å…¥**: `ä½ å¥½`

**é¢„æœŸè¡Œä¸º**:
1. âœ… æ£€æµ‹åˆ°ç®€å•å¯’æš„
2. âœ… è·³è¿‡é¢„å–
3. âœ… ä¸æ‰§è¡Œè¾…åŠ© Agent
4. âœ… ä¸» Agent ç›´æ¥å›å¤

**é¢„æœŸæ—¥å¿—**:
```
[INFO] æ£€æµ‹åˆ°ç®€å•å¯’æš„: 'ä½ å¥½'ï¼Œè·³è¿‡é¢„å–
[INFO] æ„å›¾ï¼šç®€å•å¯’æš„ â†’ ä¸æ‰§è¡Œè¾…åŠ©Agent
```

---

### æµ‹è¯• 2: äº†è§£é¡¹ç›®ï¼ˆåº”è§¦å‘å®Œæ•´é¢„å–ï¼‰
**è¾“å…¥**: `äº†è§£å½“å‰é¡¹ç›®`

**é¢„æœŸè¡Œä¸º**:
1. âœ… æ„å›¾è¯†åˆ«: understand_project
2. âœ… é¢„å–çº§åˆ«: full
3. âœ… è°ƒç”¨ 3 ä¸ªå·¥å…·: discover_project_docs + get_repo_structure + repo_map
4. âœ… æ³¨å…¥ project_understanding_block
5. âœ… é€‰æ‹©è¾…åŠ© Agent: code_analyzer
6. âœ… ä¸» Agent æ•´åˆç»“æœ

**é¢„æœŸæ—¥å¿—**:
```
[INFO] [é¢„å–åˆ¤å®š] éœ€è¦é¢„å–: True, çº§åˆ«: full, æ„å›¾: ['understand_project']
[INFO] [é¢„å–æ‰§è¡Œ] å¼€å§‹é¢„å–é¡¹ç›®ç†è§£ï¼ˆçº§åˆ«: fullï¼‰
[INFO] [é¢„å–æ‰§è¡Œ] è°ƒç”¨ discover_project_docs
[INFO] [é¢„å–æ‰§è¡Œ] discover_project_docs å®Œæˆï¼Œå†…å®¹é•¿åº¦: XXXX
[INFO] [é¢„å–æ‰§è¡Œ] è°ƒç”¨ get_repo_structure
[INFO] [é¢„å–æ‰§è¡Œ] get_repo_structure å®Œæˆï¼Œå†…å®¹é•¿åº¦: XXXX
[INFO] [é¢„å–æ‰§è¡Œ] è°ƒç”¨ repo_map
[INFO] [é¢„å–æ‰§è¡Œ] repo_map å®Œæˆï¼Œå†…å®¹é•¿åº¦: XXXX
[INFO] [é¢„å–å®Œæˆ] å·²æ³¨å…¥ project_understanding_blockï¼Œæ€»é•¿åº¦: XXXX
[INFO] [å·¥å…·è¿‡æ»¤] å·²é¢„å–é¡¹ç›®ç†è§£ï¼Œç§»é™¤å·¥å…·: ['discover_project_docs', 'get_repo_structure', 'repo_map']
[INFO] æ„å›¾ï¼šäº†è§£é¡¹ç›® â†’ é€‰æ‹© code_analyzer
[INFO] æ‰§è¡Œ 1 ä¸ªè¾…åŠ©Agent
[INFO] è¾…åŠ©Agent code_analyzer ä½¿ç”¨ Skill code-analysis çš„ Prompt
```

---

### æµ‹è¯• 3: æ–‡ä»¶åˆ†æï¼ˆåº”å…ˆæŸ¥æ‰¾å†è¯»å–ï¼‰
**è¾“å…¥**: `chat_assistant.mdæœ‰å•¥ä¼˜åŒ–å»ºè®®`

**é¢„æœŸè¡Œä¸º**:
1. âœ… é€‰æ‹©è¾…åŠ© Agent: code_analyzer + programmer
2. âœ… è¾…åŠ© Agent ä½¿ç”¨è‡ªå·±çš„ Skill é…ç½®
3. âœ… å…ˆè°ƒç”¨ text_search æ‰¾æ–‡ä»¶
4. âœ… å†è°ƒç”¨ read_file è¯»å–
5. âœ… è¿”å›åˆ†æç»“æœ
6. âœ… ä¸» Agent æ•´åˆ

**é¢„æœŸæ—¥å¿—**:
```
[INFO] æ ¹æ®å…³é”®è¯é€‰æ‹©äº† 2 ä¸ªè¾…åŠ©Agent: ['code_analyzer', 'programmer']
[INFO] æ‰§è¡Œ 2 ä¸ªè¾…åŠ©Agent
[INFO] è¾…åŠ©Agent code_analyzer ä½¿ç”¨ Skill code-analysis çš„ Prompt
[INFO] è¾…åŠ©Agent programmer ä½¿ç”¨ Skill programming çš„ Prompt

ğŸ”§ æ‰§è¡Œå·¥å…·: text_search
query  chat_assistant
file_pattern  **/*.md
âœ“ æ‰§è¡Œå®Œæˆ

ğŸ”§ æ‰§è¡Œå·¥å…·: read_file
file_path  skills/chat-assistant/prompts/chat_assistant.md
âœ“ æ‰§è¡Œå®Œæˆ
```

---

### æµ‹è¯• 4: ç¼–ç¨‹ä»»åŠ¡ï¼ˆåº”è§¦å‘è¯­ä¹‰æœç´¢ï¼‰
**è¾“å…¥**: `å¦‚ä½•å®ç°æ–‡ä»¶æ‰¹é‡è¯»å–`

**é¢„æœŸè¡Œä¸º**:
1. âœ… æ„å›¾è¯†åˆ«: need_code_context æˆ– edit_or_write
2. âœ… é¢„å– semantic_code_chunks
3. âœ… é€‰æ‹©è¾…åŠ© Agent: programmer + code_analyzer
4. âœ… ä¸» Agent åŸºäºè¯­ä¹‰æœç´¢ç»“æœå›ç­”

**é¢„æœŸæ—¥å¿—**:
```
[INFO] è¯­ä¹‰ä»£ç æ£€ç´¢å®Œæˆï¼Œè€—æ—¶: X.XXç§’
[INFO] æŒ‰é—®æ£€ç´¢: å·²æ³¨å…¥ semantic_code_chunks
[INFO] æ„å›¾ï¼šç¼–å†™ä»£ç  â†’ é€‰æ‹© programmer + code_analyzer
```

---

## å…³é”®æ£€æŸ¥ç‚¹

### 1. ç”¨æˆ·è¾“å…¥ä½ç½® âœ…
**æ£€æŸ¥**: Prompt ä¸­ç”¨æˆ·è¾“å…¥æ˜¯å¦åœ¨æœ€å‰é¢

**æ–¹æ³•**: æŸ¥çœ‹ DEBUG æ—¥å¿—ä¸­çš„ Prompt å‰ 500 å­—ç¬¦
```
[DEBUG] [Promptæ¸²æŸ“] å‰500å­—ç¬¦: # Sisyphus...\n\n## ç”¨æˆ·è¾“å…¥\n\näº†è§£å½“å‰é¡¹ç›®\n\n---
```

**é¢„æœŸ**: ç”¨æˆ·è¾“å…¥ç´§è·Ÿæ ‡é¢˜åé¢

---

### 2. å ä½ç¬¦æ¸²æŸ“ âœ…
**æ£€æŸ¥**: æ‰€æœ‰å ä½ç¬¦æ˜¯å¦æ­£ç¡®æ¸²æŸ“

**å ä½ç¬¦åˆ—è¡¨**:
- `{{user_input}}` - ç”¨æˆ·è¾“å…¥
- `{{repo}}` - é¡¹ç›®æ ¹ç›®å½•
- `{{project_understanding_block}}` - é¢„å–çš„é¡¹ç›®ä¿¡æ¯
- `{{semantic_code_chunks}}` - è¯­ä¹‰æœç´¢ç»“æœ
- `{{conversation_history}}` - å¯¹è¯å†å²
- `{{helper_results}}` - è¾…åŠ© Agent ç»“æœï¼ˆsisyphus ä¸“ç”¨ï¼‰

---

### 3. Skill Registry âœ…
**æ£€æŸ¥**: è¾…åŠ© Agent æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„ Skill é…ç½®

**é¢„æœŸæ—¥å¿—**:
```
[INFO] è¾…åŠ©Agent code_analyzer ä½¿ç”¨ Skill code-analysis çš„ Prompt
[INFO] è¾…åŠ©Agent programmer ä½¿ç”¨ Skill programming çš„ Prompt
```

**å¦‚æœå¤±è´¥**:
```
[WARNING] è¾…åŠ©Agent code_analyzer æœªæ‰¾åˆ° Skill code-analysisï¼Œä½¿ç”¨é»˜è®¤Prompt
```

---

### 4. å·¥å…·è°ƒç”¨é¡ºåº âœ…
**æ£€æŸ¥**: æ˜¯å¦å…ˆæŸ¥æ‰¾å†è¯»å–

**æ­£ç¡®é¡ºåº**:
```
1. text_search(query="chat_assistant", file_pattern="**/*.md")
2. read_file(file_path="skills/chat-assistant/prompts/chat_assistant.md")
```

**é”™è¯¯é¡ºåº**:
```
1. read_file(file_path="chat_assistant.md")  â† ç›´æ¥ç”¨æ–‡ä»¶åï¼Œä¼šå¤±è´¥
```

---

### 5. é¢„å–å†…å®¹æ³¨å…¥ âœ…
**æ£€æŸ¥**: é¢„å–å†…å®¹æ˜¯å¦æ­£ç¡®æ³¨å…¥åˆ° context

**é¢„æœŸæ—¥å¿—**:
```
[INFO] [é¢„å–å®Œæˆ] å·²æ³¨å…¥ project_understanding_blockï¼Œæ€»é•¿åº¦: 6500
[INFO] [é¢„å–] ä¸»Agent å…¥å‚ context å« project_understanding_block=6500 (chars)
```

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: ç”¨æˆ·è¾“å…¥æœªæ³¨å…¥
**ç°è±¡**: LLM è¯´"æ¶ˆæ¯æ²¡æœ‰å®Œå…¨å‘é€è¿‡æ¥"

**æ’æŸ¥**:
1. æ£€æŸ¥ Prompt æ¨¡æ¿æ˜¯å¦æœ‰ `{{user_input}}`
2. æ£€æŸ¥ç”¨æˆ·è¾“å…¥æ˜¯å¦åœ¨ Prompt æœ€å‰é¢
3. æŸ¥çœ‹ DEBUG æ—¥å¿—ä¸­çš„ Prompt å†…å®¹

**è§£å†³**: å·²ä¿®å¤ï¼Œç”¨æˆ·è¾“å…¥ç°åœ¨åœ¨æœ€å‰é¢

---

### é—®é¢˜ 2: é¢„å–å†…å®¹æœªæ³¨å…¥
**ç°è±¡**: LLM é‡å¤è°ƒç”¨ discover_project_docs ç­‰å·¥å…·

**æ’æŸ¥**:
1. æ£€æŸ¥ Prompt æ¨¡æ¿æ˜¯å¦æœ‰ `{{project_understanding_block}}`
2. æ£€æŸ¥ context ä¸­æ˜¯å¦æœ‰ project_understanding_block
3. æŸ¥çœ‹é¢„å–æ—¥å¿—

**è§£å†³**: å·²æ·»åŠ å ä½ç¬¦ï¼Œå¹¶åœ¨ Prompt ä¸­è¯´æ˜ä¸è¦é‡å¤è°ƒç”¨

---

### é—®é¢˜ 3: è¾…åŠ© Agent æ²¡æœ‰ Prompt
**ç°è±¡**: è¾…åŠ© Agent è¿”å›ç©ºç»“æœæˆ–é”™è¯¯

**æ’æŸ¥**:
1. æ£€æŸ¥ Skill Registry æ˜¯å¦æ­£ç¡®åŠ è½½
2. æ£€æŸ¥ agent_to_skill æ˜ å°„æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„ Skill åŠ è½½ä¿¡æ¯

**è§£å†³**: å·²ä¿®å¤ï¼Œç°åœ¨ä½¿ç”¨ Skill Registry è·å–é…ç½®

---

### é—®é¢˜ 4: ç›´æ¥ç”¨æ–‡ä»¶åè¯»å–
**ç°è±¡**: read_file å¤±è´¥ï¼Œæç¤ºæ–‡ä»¶ä¸å­˜åœ¨

**æ’æŸ¥**:
1. æ£€æŸ¥æ˜¯å¦å…ˆè°ƒç”¨äº† text_search
2. æ£€æŸ¥ read_file çš„ file_path å‚æ•°æ˜¯å¦æ˜¯å®Œæ•´è·¯å¾„

**è§£å†³**: å·²åœ¨æ‰€æœ‰ Prompt ä¸­æ·»åŠ "å…ˆæŸ¥æ‰¾å†è¯»å–"è§„åˆ™

---

## æ€§èƒ½æŒ‡æ ‡

### é¢„å–æ€§èƒ½
- discover_project_docs: ~0.5-2ç§’
- get_repo_structure: ~0.1-0.5ç§’
- repo_map: ~1-5ç§’ï¼ˆé¦–æ¬¡å»ºç«‹ç´¢å¼•ï¼‰
- æ€»è®¡: ~2-8ç§’

### è¯­ä¹‰æœç´¢æ€§èƒ½
- é¦–æ¬¡å»ºç«‹ç´¢å¼•: ~10-30ç§’
- åç»­æŸ¥è¯¢: ~0.5-2ç§’

### è¾…åŠ© Agent æ‰§è¡Œ
- å•ä¸ª Agent: ~2-10ç§’ï¼ˆå–å†³äºå·¥å…·è°ƒç”¨ï¼‰
- å¹¶è¡Œæ‰§è¡Œ: ~2-10ç§’ï¼ˆæœ€æ…¢çš„ Agentï¼‰

### æ€»å“åº”æ—¶é—´
- ç®€å•é—®å€™: ~1-2ç§’
- äº†è§£é¡¹ç›®: ~5-15ç§’ï¼ˆå«é¢„å–ï¼‰
- æ–‡ä»¶åˆ†æ: ~10-30ç§’ï¼ˆå«è¾…åŠ© Agentï¼‰
- ç¼–ç¨‹ä»»åŠ¡: ~15-40ç§’ï¼ˆå«è¯­ä¹‰æœç´¢ + è¾…åŠ© Agentï¼‰

---

## æµ‹è¯•æ¸…å•

- [ ] æµ‹è¯• 1: ç®€å•é—®å€™
- [ ] æµ‹è¯• 2: äº†è§£é¡¹ç›®
- [ ] æµ‹è¯• 3: æ–‡ä»¶åˆ†æ
- [ ] æµ‹è¯• 4: ç¼–ç¨‹ä»»åŠ¡
- [ ] æ£€æŸ¥ç‚¹ 1: ç”¨æˆ·è¾“å…¥ä½ç½®
- [ ] æ£€æŸ¥ç‚¹ 2: å ä½ç¬¦æ¸²æŸ“
- [ ] æ£€æŸ¥ç‚¹ 3: Skill Registry
- [ ] æ£€æŸ¥ç‚¹ 4: å·¥å…·è°ƒç”¨é¡ºåº
- [ ] æ£€æŸ¥ç‚¹ 5: é¢„å–å†…å®¹æ³¨å…¥

---

## ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼š
1. âœ… ç¡®è®¤é“¾è·¯æ­£å¸¸
2. ğŸ“ ä¼˜åŒ– Prompt å†…å®¹ï¼ˆç®€åŒ–è§„åˆ™ï¼Œå¼ºåŒ–å·¥ä½œæµç¨‹ï¼‰
3. ğŸ¯ æ·»åŠ æ›´å¤šå®æˆ˜ç¤ºä¾‹
4. ğŸ”§ æ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´é¢„å–ç­–ç•¥

---

**æµ‹è¯•æ—¶é—´**: å¾…æ‰§è¡Œ
**çŠ¶æ€**: å‡†å¤‡å°±ç»ª
**å‘½ä»¤**: `cd backend && python daoyoucode.py chat --skill sisyphus-orchestrator --debug`
