# å¦‚ä½•æŸ¥çœ‹ AI çš„ä»£ç ä¿®æ”¹

## é—®é¢˜

AI ä¿®æ”¹äº†ä»£ç ï¼Œä½†æˆ‘æ€ä¹ˆçŸ¥é“å®ƒæ”¹äº†ä»€ä¹ˆï¼Ÿ

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: å·¥å…·è‡ªåŠ¨æ˜¾ç¤º diff âœ… å·²å®ç°

**search_replace å·¥å…·ç°åœ¨ä¼šè‡ªåŠ¨æ˜¾ç¤º diff**

ä¿®æ”¹åï¼ŒAI çš„å›å¤ä¼šåŒ…å«ï¼š

```
âœ… Successfully modified backend/test.py

ğŸ“ Changes:
```diff
--- a/backend/test.py
+++ b/backend/test.py
@@ -10,7 +10,7 @@
 
 def main():
-    timeout = 120
+    timeout = 1800
     print(f"Timeout: {timeout}")
```
```

### æ–¹æ¡ˆ 2: ä½¿ç”¨ git diff å‘½ä»¤

ä¿®æ”¹åï¼Œåœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹
git diff

# æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶çš„ä¿®æ”¹
git diff backend/test.py

# æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
git status
```

### æ–¹æ¡ˆ 3: è®© AI è°ƒç”¨ git_diff å·¥å…·

åœ¨å¯¹è¯ä¸­è¦æ±‚ï¼š

```
ç”¨æˆ·ï¼š"ä¿®æ”¹ backend/test.pyï¼Œç„¶åæ˜¾ç¤º diff"
```

æˆ–è€…ä¿®æ”¹åï¼š

```
ç”¨æˆ·ï¼š"æ˜¾ç¤ºåˆšæ‰çš„ä¿®æ”¹"
AI ä¼šè°ƒç”¨ï¼šgit_diff(file_path="backend/test.py")
```

### æ–¹æ¡ˆ 4: ä½¿ç”¨ IDE çš„ Git åŠŸèƒ½

å¤§å¤šæ•° IDEï¼ˆVS Codeã€PyCharm ç­‰ï¼‰éƒ½æœ‰ Git é›†æˆï¼š

1. æ‰“å¼€ Source Control é¢æ¿
2. æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
3. ç‚¹å‡»æ–‡ä»¶æŸ¥çœ‹ diff
4. å¯ä»¥é€è¡Œå®¡æŸ¥ä¿®æ”¹

## aider çš„åšæ³•

aider åœ¨ä¿®æ”¹ä»£ç åä¼šï¼š

1. **è‡ªåŠ¨æ˜¾ç¤º diff**ï¼šæ¯æ¬¡ä¿®æ”¹åç«‹å³æ˜¾ç¤º unified diff
2. **è¯¢é—®ç¡®è®¤**ï¼šé—®ç”¨æˆ·æ˜¯å¦æ¥å—ä¿®æ”¹
3. **æ”¯æŒæ’¤é”€**ï¼šç”¨æˆ·å¯ä»¥æ‹’ç»ä¿®æ”¹ï¼Œaider ä¼šå›æ»š

ç¤ºä¾‹ï¼š

```
aider> ä¿®æ”¹ test.pyï¼Œå°† timeout ä» 120 æ”¹ä¸º 1800

Applied edit to test.py

--- a/test.py
+++ b/test.py
@@ -1,1 +1,1 @@
-timeout = 120
+timeout = 1800

Accept these changes? (Y)es/(N)o/(U)ndo/(S)kip: 
```

## DaoyouCode çš„å®ç°

### å½“å‰å®ç° âœ…

1. **search_replace å·¥å…·è‡ªåŠ¨æ˜¾ç¤º diff**
   - ä¿®æ”¹åç«‹å³ç”Ÿæˆ unified diff
   - åœ¨å·¥å…·è¿”å›ç»“æœä¸­åŒ…å« diff
   - AI ä¼šåœ¨å›å¤ä¸­æ˜¾ç¤º diff

2. **git_diff å·¥å…·å¯ç”¨**
   - å¯ä»¥æŸ¥çœ‹ä»»ä½•æ–‡ä»¶çš„ diff
   - æ”¯æŒæŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹æˆ–ç‰¹å®šæ–‡ä»¶

### ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1: ä¿®æ”¹åè‡ªåŠ¨æ˜¾ç¤º diff

```
ç”¨æˆ·ï¼š"ä¿®æ”¹ backend/test.pyï¼Œå°† timeout ä» 120 æ”¹ä¸º 1800"

AI æ‰§è¡Œï¼š
ğŸ”§ æ‰§è¡Œå·¥å…·: search_replace
   file_path  backend/test.py
   search     timeout = 120
   replace    timeout = 1800
âœ“ æ‰§è¡Œå®Œæˆ (0.02ç§’)

AI å›å¤ï¼š
âœ… Successfully modified backend/test.py

ğŸ“ Changes:
```diff
--- a/backend/test.py
+++ b/backend/test.py
@@ -10,7 +10,7 @@
-    timeout = 120
+    timeout = 1800
```

ä¿®æ”¹å·²å®Œæˆã€‚
```

#### ç¤ºä¾‹ 2: æ‰‹åŠ¨æŸ¥çœ‹ diff

```
ç”¨æˆ·ï¼š"æ˜¾ç¤º backend/test.py çš„ä¿®æ”¹"

AI æ‰§è¡Œï¼š
ğŸ”§ æ‰§è¡Œå·¥å…·: git_diff
   file_path  backend/test.py
âœ“ æ‰§è¡Œå®Œæˆ (0.01ç§’)

AI å›å¤ï¼š
backend/test.py çš„ä¿®æ”¹ï¼š

```diff
--- a/backend/test.py
+++ b/backend/test.py
@@ -10,7 +10,7 @@
-    timeout = 120
+    timeout = 1800
```
```

#### ç¤ºä¾‹ 3: æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹

```
ç”¨æˆ·ï¼š"æ˜¾ç¤ºæ‰€æœ‰ä¿®æ”¹"

AI æ‰§è¡Œï¼š
ğŸ”§ æ‰§è¡Œå·¥å…·: git_diff
âœ“ æ‰§è¡Œå®Œæˆ (0.01ç§’)

AI å›å¤ï¼š
å½“å‰æ‰€æœ‰ä¿®æ”¹ï¼š

```diff
diff --git a/backend/test.py b/backend/test.py
--- a/backend/test.py
+++ b/backend/test.py
@@ -10,7 +10,7 @@
-    timeout = 120
+    timeout = 1800

diff --git a/backend/config.yaml b/backend/config.yaml
--- a/backend/config.yaml
+++ b/backend/config.yaml
@@ -5,7 +5,7 @@
-  max_tokens: 4000
+  max_tokens: 8000
```
```

## æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿›

1. âœ… **è‡ªåŠ¨æ˜¾ç¤º diff**ï¼ˆå·²å®ç°ï¼‰
   - search_replace å·¥å…·è¿”å› diff
   - AI åœ¨å›å¤ä¸­æ˜¾ç¤º diff

2. â³ **æ”¹è¿› Prompt**
   - æŒ‡ç¤º AI åœ¨ä¿®æ”¹åä¸»åŠ¨æ˜¾ç¤º diff
   - æˆ–è¯¢é—®ç”¨æˆ·æ˜¯å¦éœ€è¦æŸ¥çœ‹ diff

### ä¸­æœŸæ”¹è¿›

1. â³ **æ·»åŠ ç¡®è®¤æœºåˆ¶**
   - ä¿®æ”¹å‰æ˜¾ç¤ºå°†è¦åšçš„ä¿®æ”¹
   - è¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­
   - æ”¯æŒæ’¤é”€ä¿®æ”¹

2. â³ **æ”¹è¿› diff æ˜¾ç¤º**
   - ä½¿ç”¨å½©è‰² diffï¼ˆçº¢è‰²åˆ é™¤ï¼Œç»¿è‰²æ·»åŠ ï¼‰
   - æ˜¾ç¤ºä¿®æ”¹çš„è¡Œå·
   - æ˜¾ç¤ºä¿®æ”¹çš„ç»Ÿè®¡ä¿¡æ¯

### é•¿æœŸæ”¹è¿›

1. â³ **äº¤äº’å¼å®¡æŸ¥**
   - é€ä¸ªä¿®æ”¹ç‚¹å®¡æŸ¥
   - æ”¯æŒæ¥å—/æ‹’ç»å•ä¸ªä¿®æ”¹
   - ç±»ä¼¼ git add -p

2. â³ **ä¿®æ”¹å†å²**
   - è®°å½•æ‰€æœ‰ä¿®æ”¹
   - æ”¯æŒæŸ¥çœ‹å†å²ä¿®æ”¹
   - æ”¯æŒå›æ»šåˆ°ä»»æ„ç‰ˆæœ¬

## ç«‹å³ä½¿ç”¨

### æ–¹æ³• 1: è®© AI è‡ªåŠ¨æ˜¾ç¤ºï¼ˆæ¨èï¼‰

```bash
daoyoucode chat "ä¿®æ”¹ backend/test.pyï¼Œå°† timeout ä» 120 æ”¹ä¸º 1800"
# AI ä¼šè‡ªåŠ¨åœ¨å›å¤ä¸­æ˜¾ç¤º diff
```

### æ–¹æ³• 2: ä½¿ç”¨ git diff

```bash
# ä¿®æ”¹å
git diff backend/test.py
```

### æ–¹æ³• 3: æ˜ç¡®è¦æ±‚æ˜¾ç¤º

```bash
daoyoucode chat "ä¿®æ”¹ backend/test.pyï¼Œå°† timeout ä» 120 æ”¹ä¸º 1800ï¼Œç„¶åæ˜¾ç¤º diff"
```

## é…ç½®é€‰é¡¹

### åœ¨ Prompt ä¸­æ·»åŠ è‡ªåŠ¨æ˜¾ç¤º diff çš„æŒ‡ç¤º

ç¼–è¾‘ `skills/chat-assistant/prompts/chat_assistant.md`ï¼š

```markdown
## ä»£ç ä¿®æ”¹åçš„è¡Œä¸º

ä¿®æ”¹ä»£ç åï¼Œä½ åº”è¯¥ï¼š
1. ä½¿ç”¨ search_replace å·¥å…·ä¿®æ”¹æ–‡ä»¶ï¼ˆä¼šè‡ªåŠ¨ç”Ÿæˆ diffï¼‰
2. åœ¨å›å¤ä¸­æ˜¾ç¤ºä¿®æ”¹çš„ diff
3. ç®€è¦è¯´æ˜ä¿®æ”¹äº†ä»€ä¹ˆ

ç¤ºä¾‹ï¼š
âœ… å·²ä¿®æ”¹ backend/test.py

ğŸ“ Changes:
```diff
-    timeout = 120
+    timeout = 1800
```

å°†è¶…æ—¶æ—¶é—´ä» 120 ç§’å¢åŠ åˆ° 1800 ç§’ï¼ˆ30 åˆ†é’Ÿï¼‰ã€‚
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ²¡æœ‰çœ‹åˆ° diff

**åŸå› **ï¼š
1. AI æ²¡æœ‰åœ¨å›å¤ä¸­æ˜¾ç¤º diff
2. search_replace å·¥å…·è¿”å›çš„ diff è¢«æˆªæ–­

**è§£å†³**ï¼š
```bash
# æ‰‹åŠ¨æŸ¥çœ‹
git diff backend/test.py

# æˆ–è¦æ±‚ AI æ˜¾ç¤º
daoyoucode chat "æ˜¾ç¤º backend/test.py çš„ä¿®æ”¹"
```

### é—®é¢˜ï¼šdiff æ ¼å¼ä¸æ¸…æ™°

**åŸå› **ï¼š
- ç»ˆç«¯ä¸æ”¯æŒå½©è‰²è¾“å‡º
- diff å¤ªé•¿è¢«æˆªæ–­

**è§£å†³**ï¼š
```bash
# ä½¿ç”¨ git diff æŸ¥çœ‹ï¼ˆæ”¯æŒå½©è‰²ï¼‰
git diff backend/test.py

# æˆ–ä½¿ç”¨ IDE çš„ Git åŠŸèƒ½
```

### é—®é¢˜ï¼šæƒ³æ’¤é”€ä¿®æ”¹

**è§£å†³**ï¼š
```bash
# æ’¤é”€å•ä¸ªæ–‡ä»¶
git checkout backend/test.py

# æ’¤é”€æ‰€æœ‰ä¿®æ”¹
git checkout .

# æˆ–ä½¿ç”¨ git restoreï¼ˆGit 2.23+ï¼‰
git restore backend/test.py
```

## æ€»ç»“

### å½“å‰åŠŸèƒ½ âœ…

1. search_replace å·¥å…·è‡ªåŠ¨ç”Ÿæˆå¹¶è¿”å› diff
2. git_diff å·¥å…·å¯ä»¥æŸ¥çœ‹ä»»ä½•æ–‡ä»¶çš„ä¿®æ”¹
3. AI ä¼šåœ¨å›å¤ä¸­æ˜¾ç¤º diff

### ä½¿ç”¨æ–¹æ³•

1. **è‡ªåŠ¨æ˜¾ç¤º**ï¼šä¿®æ”¹å AI è‡ªåŠ¨æ˜¾ç¤º diff
2. **æ‰‹åŠ¨æŸ¥çœ‹**ï¼šä½¿ç”¨ `git diff` å‘½ä»¤
3. **è¦æ±‚æ˜¾ç¤º**ï¼šæ˜ç¡®è¦æ±‚ AI æ˜¾ç¤º diff

### ä¸ aider çš„å¯¹æ¯”

| åŠŸèƒ½ | aider | DaoyouCode |
|------|-------|------------|
| è‡ªåŠ¨æ˜¾ç¤º diff | âœ… | âœ… |
| è¯¢é—®ç¡®è®¤ | âœ… | â³ å¾…å®ç° |
| æ”¯æŒæ’¤é”€ | âœ… | â³ ä½¿ç”¨ git |
| å½©è‰² diff | âœ… | â³ å¾…å®ç° |
| äº¤äº’å¼å®¡æŸ¥ | âœ… | â³ å¾…å®ç° |

### ç«‹å³è¡ŒåŠ¨

```bash
# 1. é‡æ–°å®‰è£…ï¼ˆåº”ç”¨ä¿®æ”¹ï¼‰
cd backend
pip install -e .

# 2. æµ‹è¯•ä¿®æ”¹å’Œ diff æ˜¾ç¤º
cd ..
daoyoucode chat "ä¿®æ”¹ backend/test.mdï¼Œå°† hello æ”¹ä¸º world"

# 3. æŸ¥çœ‹ diffï¼ˆåº”è¯¥è‡ªåŠ¨æ˜¾ç¤ºåœ¨ AI å›å¤ä¸­ï¼‰
```

---

**ç°åœ¨ AI ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨æ˜¾ç¤º diffï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä¿®æ”¹äº†ä»€ä¹ˆï¼**
