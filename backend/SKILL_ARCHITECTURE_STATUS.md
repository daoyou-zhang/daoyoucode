# Skillæ¶æ„é‡æ„çŠ¶æ€

> **æ›´æ–°æ—¶é—´**: 2025-02-12  
> **çŠ¶æ€**: âœ… æ¶æ„é‡æ„å®Œæˆï¼Œç­‰å¾…LLMé…ç½®æµ‹è¯•

---

## âœ… å·²å®Œæˆ

### 1. æ¶æ„é‡æ„

**ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰**:
```
CLI â†’ Agent.execute(tools=[...])  # âŒ ç»•è¿‡äº†æ‰€æœ‰ç³»ç»Ÿ
```

**ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰**:
```
CLI â†’ execute_skill("chat_assistant") â†’ Executor â†’ Skill â†’ ReAct â†’ Agent â†’ å·¥å…·
```

### 2. Skillç³»ç»Ÿ

- âœ… åˆ›å»ºäº† `skills/chat-assistant/skill.yaml`
- âœ… åˆ›å»ºäº† `skills/chat-assistant/prompts/chat_assistant.md`
- âœ… é…ç½®äº†7ä¸ªå·¥å…·ï¼šrepo_map, get_repo_structure, read_file, search_files, grep_search, write_file, list_directory
- âœ… é…ç½®äº†æƒé™æ§åˆ¶
- âœ… é…ç½®äº†Hookç³»ç»Ÿ

### 3. CLIç®€åŒ–

**ä¹‹å‰**: chat.pyç®¡ç†ä¸Šä¸‹æ–‡ã€æ–‡ä»¶ã€å†å²ï¼ˆ200+è¡Œï¼‰

**ç°åœ¨**: chat.pyåªè´Ÿè´£UIï¼ˆ100è¡Œï¼‰
- ç§»é™¤äº†æ‰‹åŠ¨æ–‡ä»¶ç®¡ç†ï¼ˆ/add, /drop, /filesï¼‰
- ç§»é™¤äº†ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆAgentç³»ç»Ÿè´Ÿè´£ï¼‰
- ç§»é™¤äº†å·¥å…·åˆ—è¡¨ä¼ é€’
- åªä¿ç•™UIç›¸å…³å‘½ä»¤ï¼ˆ/help, /exit, /modelï¼‰

### 4. ReActç¼–æ’å™¨

- âœ… æ³¨å†Œäº†ReActç¼–æ’å™¨
- âœ… ä¿®å¤äº†æ¥å£ç­¾åï¼ˆåŒ¹é…simple orchestratorï¼‰
- âœ… å®ç°äº†åŸºç¡€ç‰ˆæœ¬ï¼ˆå®Œæ•´çš„Reason-Act-Observe-Reflectå¾ªç¯å¾…å®ç°ï¼‰

### 5. æµ‹è¯•éªŒè¯

è¿è¡Œ `python backend/test_skill_architecture.py`:

```
âœ“ é€šè¿‡: SkillåŠ è½½ - 7ä¸ªSkillæˆåŠŸåŠ è½½
âœ“ é€šè¿‡: Skillé…ç½® - chat_assistanté…ç½®æ­£ç¡®
âœ— å¤±è´¥: Executorè°ƒç”¨ - MainAgentæœªæ³¨å†Œï¼ˆéœ€è¦LLMé…ç½®ï¼‰
âœ“ é€šè¿‡: æ¶æ„æµç¨‹ - æµç¨‹æ­£ç¡®
```

---

## ğŸ”„ ä¸‹ä¸€æ­¥

### 1. æµ‹è¯•çœŸå®API

ç”¨æˆ·å·²é…ç½®é€šä¹‰åƒé—®APIï¼Œéœ€è¦æµ‹è¯•ï¼š

```bash
cd backend
python -m cli.app chat
```

**é¢„æœŸè¡Œä¸º**:
1. ç”¨æˆ·è¾“å…¥ï¼š"è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"
2. Agentè‡ªåŠ¨è°ƒç”¨ `repo_map` å·¥å…·
3. AgentåŸºäºç»“æœå›ç­”

### 2. éªŒè¯å·¥å…·è°ƒç”¨

Agentåº”è¯¥èƒ½å¤Ÿï¼š
- ä¸»åŠ¨è°ƒç”¨ `repo_map` ç†è§£é¡¹ç›®ç»“æ„
- ä¸»åŠ¨è°ƒç”¨ `read_file` æŸ¥çœ‹ä»£ç 
- ä¸»åŠ¨è°ƒç”¨ `search_files` æœç´¢æ–‡ä»¶
- ä¸»åŠ¨è°ƒç”¨ `grep_search` æœç´¢ä»£ç 

### 3. éªŒè¯è®°å¿†ç³»ç»Ÿ

- å¯¹è¯å†å²åº”è¯¥è‡ªåŠ¨ä¿å­˜
- å¤šè½®å¯¹è¯åº”è¯¥æœ‰ä¸Šä¸‹æ–‡
- ä¼šè¯IDåº”è¯¥æ­£ç¡®ä¼ é€’

---

## ğŸ“Š æ¶æ„å¯¹æ¯”

| ç‰¹æ€§ | ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰ | ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰ |
|------|------------|------------|
| Skillç³»ç»Ÿ | âŒ ç»•è¿‡ | âœ… ä½¿ç”¨ |
| æ™ºèƒ½è·¯ç”± | âŒ æ—  | âœ… æ”¯æŒ |
| ç¼–æ’å™¨ | âŒ ç»•è¿‡ | âœ… ReAct |
| æƒé™æ§åˆ¶ | âŒ æ—  | âœ… æœ‰ |
| Hookç³»ç»Ÿ | âŒ æ—  | âœ… é›†æˆ |
| å·¥å…·ç®¡ç† | âŒ CLIç®¡ç† | âœ… Skillç®¡ç† |
| ä¸Šä¸‹æ–‡ç®¡ç† | âŒ CLIç®¡ç† | âœ… Agentç®¡ç† |
| æ–‡ä»¶ç®¡ç† | âŒ æ‰‹åŠ¨/add | âœ… è‡ªåŠ¨è°ƒç”¨å·¥å…· |
| å¯æ‰©å±•æ€§ | âŒ å·® | âœ… å¥½ |
| è§£è€¦ç¨‹åº¦ | âŒ ä½ | âœ… é«˜ |

---

## ğŸ¯ å…³é”®æ”¹è¿›

### 1. CLIèŒè´£æ¸…æ™°

**ä¹‹å‰**: CLIåšäº†å¤ªå¤šäº‹æƒ…
- ç®¡ç†æ–‡ä»¶åˆ—è¡¨
- ç®¡ç†å¯¹è¯å†å²
- ä¼ é€’å·¥å…·åˆ—è¡¨
- ç®¡ç†ä¸Šä¸‹æ–‡

**ç°åœ¨**: CLIåªè´Ÿè´£UI
- æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
- è·å–ç”¨æˆ·è¾“å…¥
- è°ƒç”¨ `execute_skill`
- æ˜¾ç¤ºç»“æœ

### 2. Agentè‡ªä¸»æ€§

**ä¹‹å‰**: Agentè¢«åŠ¨æ¥æ”¶æ–‡ä»¶
```
ç”¨æˆ·: /add main.py
ç”¨æˆ·: /add utils.py
ç”¨æˆ·: è¿™ä¸¤ä¸ªæ–‡ä»¶åšä»€ä¹ˆçš„ï¼Ÿ
```

**ç°åœ¨**: Agentä¸»åŠ¨è·å–ä¿¡æ¯
```
ç”¨æˆ·: è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
Agent: [è‡ªåŠ¨è°ƒç”¨ repo_map] â†’ åŸºäºç»“æœå›ç­”
```

### 3. å·¥å…·é…ç½®åŒ–

**ä¹‹å‰**: å·¥å…·ç¡¬ç¼–ç åœ¨CLI
```python
tools = ["repo_map", "read_file", ...]  # åœ¨chat.pyä¸­
```

**ç°åœ¨**: å·¥å…·é…ç½®åœ¨Skill
```yaml
# skills/chat-assistant/skill.yaml
tools:
  - repo_map
  - read_file
  - ...
```

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶

1. **Skillé…ç½®**
   - `skills/chat-assistant/skill.yaml` - Skillå®šä¹‰
   - `skills/chat-assistant/prompts/chat_assistant.md` - Promptæ¨¡æ¿

2. **CLIå‘½ä»¤**
   - `backend/cli/commands/chat.py` - ç®€åŒ–åçš„chatå‘½ä»¤ï¼ˆ100è¡Œï¼‰

3. **Executor**
   - `backend/daoyoucode/agents/executor.py` - Skillæ‰§è¡Œå™¨

4. **ç¼–æ’å™¨**
   - `backend/daoyoucode/agents/orchestrators/react.py` - ReActç¼–æ’å™¨
   - `backend/daoyoucode/agents/orchestrators/__init__.py` - æ³¨å†ŒReAct

5. **SkillåŠ è½½å™¨**
   - `backend/daoyoucode/agents/core/skill.py` - SkillåŠ è½½å’Œç®¡ç†

### æ–‡æ¡£

1. `backend/CORRECT_ARCHITECTURE.md` - æ­£ç¡®æ¶æ„è¯´æ˜
2. `backend/SKILL_ARCHITECTURE_STATUS.md` - æœ¬æ–‡æ¡£

### æµ‹è¯•

1. `backend/test_skill_architecture.py` - æ¶æ„æµ‹è¯•è„šæœ¬

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¯åŠ¨äº¤äº’å¼å¯¹è¯

```bash
cd backend
python -m cli.app chat
```

### æµ‹è¯•æ¶æ„

```bash
python backend/test_skill_architecture.py
```

### æ·»åŠ æ–°Skill

1. åˆ›å»ºç›®å½•ï¼š`skills/my-skill/`
2. åˆ›å»ºé…ç½®ï¼š`skills/my-skill/skill.yaml`
3. åˆ›å»ºPromptï¼š`skills/my-skill/prompts/my_skill.md`
4. åœ¨CLIä¸­è°ƒç”¨ï¼š`execute_skill("my-skill", ...)`

---

## ğŸ’¡ è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£

- CLIï¼šUIäº¤äº’
- Executorï¼šSkillæ‰§è¡Œ
- Orchestratorï¼šç¼–æ’é€»è¾‘
- Agentï¼šAIæ¨ç†
- Toolsï¼šå…·ä½“æ“ä½œ

### 2. é…ç½®é©±åŠ¨

- Skillé…ç½®å®šä¹‰è¡Œä¸º
- ä¸éœ€è¦ä¿®æ”¹ä»£ç 
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 3. è‡ªä¸»æ€§

- Agentä¸»åŠ¨è°ƒç”¨å·¥å…·
- ä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æä¾›æ–‡ä»¶
- æ™ºèƒ½ç†è§£é¡¹ç›®ç»“æ„

### 4. å¯è¿½è¸ª

- å®Œæ•´çš„Hookç³»ç»Ÿ
- ä»»åŠ¡ç®¡ç†
- è®°å¿†ç³»ç»Ÿ

---

## ğŸ‰ æ€»ç»“

æ¶æ„é‡æ„å·²å®Œæˆï¼ç°åœ¨DaoyouCodeçœŸæ­£å®ç°äº†ï¼š

1. âœ… å®Œæ•´çš„Skillç³»ç»Ÿ
2. âœ… æ™ºèƒ½ç¼–æ’å™¨ï¼ˆReActï¼‰
3. âœ… æƒé™æ§åˆ¶
4. âœ… Hookç³»ç»Ÿ
5. âœ… ä»»åŠ¡ç®¡ç†
6. âœ… Agentè‡ªä¸»æ€§
7. âœ… å·¥å…·è‡ªåŠ¨è°ƒç”¨

ä¸‹ä¸€æ­¥ï¼šæµ‹è¯•çœŸå®APIï¼ŒéªŒè¯Agentèƒ½å¦ä¸»åŠ¨ç†è§£é¡¹ç›®ä»£ç ï¼ğŸš€
