{
  "model": "qwen-coder-plus",
  "messages": [
    {
      "role": "user",
      "content": ""
    },
    {
      "role": "assistant",
      "content": null,
      "function_call": {
        "arguments": "{\"repo_path\": \".\"}  \n\n请根据您的需求选择合适的工具和参数。",
        "name": "get_repo_structure"
      }
    },
    {
      "role": "function",
      "name": "get_repo_structure",
      "content": "backend/\n├── .daoyoucode/\n│   └── cache/\n│       └── repomap.db\n├── .pytest_cache/  # 测试代码\n│   ├── v/\n│   │   └── cache/\n│   ├── .gitignore\n│   └── CACHEDIR.TAG\n├── cli/  # 命令行界面\n│   ├── commands/\n│   │   ├── __init__.py\n│   │   ├── agent.py\n│   │   ├── chat.py\n│   │   ├── config.py\n│   │   ├── doctor.py\n│   │   ├── edit.py\n│   │   ├── models.py\n│   │   ├── serve.py\n│   │   ├── session.py\n│   │   └── skills.py\n│   ├── ui/\n│   │   ├── __init__.py\n│   │   ├── console.py\n│   │   ├── markdown.py\n│   │   └── stream.py\n│   ├── utils/  # 工具函数\n│   │   ├── __init__.py\n│   │   ├── config.py\n│   │   ├── errors.py\n│   │   └── logger.py\n│   ├── __init__.py\n│   ├── __main__.py\n│   ├── app.py\n│   └── requirements.txt\n├── config/  # 配置文件\n│   ├── agent_router_config.yaml\n│   ├── llm_config.yaml\n│   └── memory_load_strategies.example.yaml\n├── daoyoucode/\n│   ├── agents/  # Agent系统\n│   │   ├── builtin/\n│   │   ├── core/  # 核心组件\n│   │   ├── hooks/\n│   │   ├── llm/  # LLM客户端\n│   │   ├── memory/  # 记忆系统\n│   │   ├── middleware/  # 中间件\n│   │   ├── orchestrators/  # 编排器\n│   │   ├── tools/  # 工具模块\n│   │   ├── ui/\n│   │   ├── __init__.py\n│   │   ├── executor.py\n│   │   └── init.py\n│   ├── api/  # API接口\n│   │   ├── middleware/  # 中间件\n│   │   ├── routes/  # 路由\n│   │   └── websocket/\n│   └── __init__.py\n├── tests/  # 测试代码\n│   ├── test_3_stage_understanding.py\n│   ├── test_advanced_features.py\n│   ├── test_agent_integration.py\n│   ├── test_api_call.py\n│   ├── test_app_direct.py\n│   ├── test_app_step.py\n│   ├── test_ast_tools.py\n│   ├── test_auto_scale_tokens.py\n│   ├── test_cache_layer.py\n│   ├── test_chat_flow.py\n│   ├── test_chat_real.py\n│   ├── test_chat_simple.py\n│   ├── test_chat_with_init.py\n│   ├── test_cli_env.py\n│   ├── test_cli_help.py\n│   ├── test_cli_skills.py\n│   ├── test_context_enhancements.py\n│   ├── test_context_manager.py\n│   ├── test_conversation_tree.py\n│   ├── test_diff_tools.py\n│   ├── test_execution_planner.py\n│   ├── test_feedback_loop.py\n│   ├── test_final_demo.py\n│   ├── test_function_calling.py\n│   ├── test_git_enhancements.py\n│   ├── test_hooks.py\n│   ├── test_import.py\n│   ├── test_init_system.py\n│   ├── test_integration.py\n│   ├── test_intelligence_features.py\n│   ├── test_intelligent_router.py\n│   ├── test_llm_config.py\n│   ├── test_load_strategy_config.py\n│   ├── test_lsp_tools.py\n│   ├── test_memory_debug.py\n│   ├── test_memory_integration.py\n│   ├── test_multi_branch.py\n│   ├── test_multi_branch_simple.py\n│   ├── test_new_agents.py\n│   ├── test_new_tools.py\n│   ├── test_orchestration.py\n│   ├── test_orchestrator_enhancements.py\n│   ├── test_parallel_llm.py\n│   ├── test_path_handling.py\n│   ├── test_permissions.py\n│   ├── test_persistence.py\n│   ├── test_phase2.py\n│   ├── test_postprocessing.py\n│   ├── test_profile_check_optimization.py\n│   ├── test_recovery.py\n│   ├── test_reload.py\n│   ├── test_repo_map.py\n│   ├── test_repo_map_simple.py\n│   ├── test_repo_path_determination.py\n│   ├── test_repomap_generation.py\n│   ├── test_repomap_tools.py\n│   ├── test_router_dynamic.py\n│   ├── test_simple_llm.py\n│   ├── test_skill_architecture.py\n│   ├── test_stream_output.py\n│   ├── test_task_manager.py\n│   ├── test_temp.py\n│   ├── test_timeout_integration.py\n│   ├── test_timeout_recovery.py\n│   ├── test_tool_display.py\n│   ├── test_tool_history_optimization.py\n│   ├── test_tool_names.py\n│   ├── test_tool_registry.py\n│   ├── test_tool_result_fix.py\n│   ├── test_tool_truncation.py\n│   ├── test_tools.py\n│   ├── test_tree_visualization.py\n│   ├── test_truncate_description.py\n│   ├── test_user_manager.py\n│   ├── test_user_sessions.py\n│   ├── test_verification_permission.py\n│   ├── test_workflow_parallel_explore.py\n│   ├── test_working_directory.py\n│   ├── verify_project_understanding_improvements.py\n│   ├── verify_react_docs.py\n│   └── verify_timeout_config.py\n├── AGENTS智能体介绍.md\n├── API_KEY轮询配置说明.md\n├── CLI命令参考.md\n├── ORCHESTRATORS编排器介绍.md\n├── PROMPT修复总结.md\n├── README.md\n├── TASK_SUMMARY_模型配置.md\n├── TOOLS工具参考.md\n├── daoyoucode.py\n├── debug_500_error.md\n├── debug_llm_request_1771334615.json\n├── llm_config_qwen_only.yaml\n├── pyproject.toml\n├── pytest.ini\n├── requirements.txt\n├── test_api_key_rotation.py\n├── test_fixes.py\n├── test_llm_connection.py\n├── test_middleware_fix.py\n├── test_model_config.py\n├── test_real_rotation.py\n├── 修复记录.md\n├── 如何配置模型.md\n├── 模型配置架构说明.md\n└── 问题诊断和修复_20250217.md"
    }
  ],
  "temperature": 0.2,
  "max_tokens": null,
  "functions": [
    {
      "name": "repo_map",
      "description": "生成代码仓库地图，智能排序最相关的代码定义",
      "parameters": {
        "type": "object",
        "properties": {
          "repo_path": {
            "type": "string",
            "description": "仓库根目录路径。必须使用 '.' 表示当前工作目录，不要使用占位符路径！"
          },
          "chat_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "对话中提到的文件列表（权重×50）。如果为空，会自动扩大token预算以提供更全面的项目视图"
          },
          "mentioned_idents": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "对话中提到的标识符列表（权重×10）"
          },
          "max_tokens": {
            "type": "integer",
            "description": "最大token数量（默认3000）。如果chat_files为空，会自动扩大到6000",
            "default": 3000
          },
          "auto_scale": {
            "type": "boolean",
            "description": "是否自动调整token预算（默认true）。当chat_files为空时，自动扩大预算以提供更全面的视图",
            "default": true
          }
        },
        "required": [
          "repo_path"
        ]
      }
    },
    {
      "name": "get_repo_structure",
      "description": "获取仓库目录结构，支持智能注释",
      "parameters": {
        "type": "object",
        "properties": {
          "repo_path": {
            "type": "string",
            "description": "仓库根目录路径。必须使用 '.' 表示当前工作目录，不要使用占位符路径！"
          },
          "max_depth": {
            "type": "integer",
            "description": "最大深度",
            "default": 3
          },
          "show_files": {
            "type": "boolean",
            "description": "是否显示文件（否则只显示目录）",
            "default": true
          },
          "annotate": {
            "type": "boolean",
            "description": "是否添加智能注释（帮助理解目录含义）",
            "default": true
          }
        },
        "required": [
          "repo_path"
        ]
      }
    },
    {
      "name": "text_search",
      "description": "在文件中搜索文本",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "搜索关键词"
          },
          "directory": {
            "type": "string",
            "description": "搜索目录。默认为当前工作目录（'.'），也可以指定子目录的相对路径",
            "default": "."
          },
          "file_pattern": {
            "type": "string",
            "description": "文件名模式（如 *.py）"
          },
          "case_sensitive": {
            "type": "boolean",
            "description": "是否区分大小写",
            "default": false
          },
          "max_results": {
            "type": "integer",
            "description": "最大结果数",
            "default": 100
          }
        },
        "required": [
          "query"
        ]
      }
    },
    {
      "name": "read_file",
      "description": "读取文件内容",
      "parameters": {
        "type": "object",
        "properties": {
          "file_path": {
            "type": "string",
            "description": "文件的相对路径。例如: 'backend/config.py' 或 'README.md'。不要使用占位符！"
          },
          "encoding": {
            "type": "string",
            "description": "编码格式",
            "default": "utf-8"
          }
        },
        "required": [
          "file_path"
        ]
      }
    }
  ]
}