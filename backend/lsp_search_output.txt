[1] daoyoucode\agents\executor.py (L20-63)

è´¨é‡: â­


ðŸ“ ç¬¦å·ä¿¡æ¯:

  - execute_skill

åˆ†æ•°: 0.394


```
async def execute_skill(
    skill_name: str,
    user_input: str,
    session_id: Optional[str] = None,
    context: Optional[Dict[str, Any]] = None,
    recovery_config: Optional[RecoveryConfig] = None,
    validator: Optional[Callable[[Any], bool]] = None,
    analyzer: Optional[Callable[[Any, Optional[Exception]], str]] = None,
    enable_timeout_recovery: Optional[bool] = None
) -> Dict[str, Any]:
    """
    æ‰§è¡ŒSkillï¼ˆé›†æˆHookç³»ç»Ÿã€å¤±è´¥æ¢å¤å’Œè¶…æ—¶æ¢å¤ï¼‰
    
    Args:
        skill_name: Skillåç§°
        user_input: ç”¨æˆ·è¾“å…¥
        session_id: ä¼šè¯ID
        context: é¢å¤–ä¸Šä¸‹æ–‡
        recovery_config: æ¢å¤é…ç½®ï¼ˆå¯é€‰ï¼‰
        validator: ç»“æžœéªŒè¯å‡½æ•°ï¼ˆå¯é€‰ï¼‰
        analyzer: é”™è¯¯åˆ†æžå‡½æ•°ï¼ˆå¯é€‰ï¼‰
        enable_timeout_recovery: æ˜¯å¦å¯ç”¨è¶…æ—¶æ¢å¤ï¼ˆNone=è‡ªåŠ¨åˆ¤æ–­ï¼‰
    
    Returns:
        æ‰§è¡Œç»“æžœ
    """
    if context is None:
        context = {}
    
    if session_id:
        context['session_id'] = session_id
    
    # åˆ¤æ–­æ˜¯å¦å¯ç”¨è¶…æ—¶æ¢å¤
    if enable_timeout_recovery is None:
        enable_timeout_recovery = should_enable_timeout_recovery(context)
    
    # å¦‚æžœå¯ç”¨è¶…æ—¶æ¢å¤ï¼Œä½¿ç”¨ timeout_handler
    if enable_timeout_recovery:
        logger.info("âœ… å¯ç”¨è¶…æ—¶æ¢å¤æœºåˆ¶")
        
        # å¦‚æžœåŒæ—¶å¯ç”¨äº†å¤±è´¥æ¢å¤ï¼Œéœ€è¦åµŒå¥—å¤„ç†
        if recovery_config or validator or analyzer:
         
```

[2] cli\commands\edit.py (L137-234)

è´¨é‡: â­â­


ðŸ“ ç¬¦å·ä¿¡æ¯:

  - execute_edit_via_skill

  - execute_edit_mock

åˆ†æ•°: 0.342


```
def execute_edit_via_skill(
    files: List[Path],
    instruction: str,
    model: str,
    yes: bool,
    repo: Path,
):
    """é€šè¿‡ edit-single Skill æ‰§è¡Œç¼–è¾‘ï¼ˆå¤ç”¨ç¼–æŽ’å™¨ã€è¶…æ—¶æ¢å¤ã€Hookï¼‰"""
    from cli.ui.console import console
    import asyncio
    import os

    repo_path = os.path.abspath(str(repo))
    # è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼šä½¿ç”¨ç›¸å¯¹ repo çš„è·¯å¾„ä¾› Agent ä½¿ç”¨
    try:
        repo_p = Path(repo_path)
        edit_files = [str(Path(f).resolve().relative_to(repo_p)) if repo_p in Path(f).resolve().parents or Path(f).resolve() == repo_p else str(f) for f in files]
    except ValueError:
        edit_files = [str(f) for f in files]

    user_input = f"""è¯·ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ï¼Œå¹¶ä¸¥æ ¼æŒ‰æŒ‡ä»¤ä¿®æ”¹ï¼š

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**
{chr(10).join('- ' + p for p in edit_files)}

**ç¼–è¾‘æŒ‡ä»¤ï¼š**
{instruction}

è¯·å…ˆè¯»å–ä¸Šè¿°æ–‡ä»¶å†…å®¹ï¼Œå†æŒ‰æŒ‡ä»¤åšæœ€å°åŒ–ã€ç²¾ç¡®çš„ä¿®æ”¹ï¼Œå¹¶ä½¿ç”¨ write_file æˆ– search_replace å·¥å…·å†™å…¥ã€‚è·¯å¾„ä½¿ç”¨ç›¸å¯¹é¡¹ç›®æ ¹çš„è·¯å¾„ã€‚"""

    context = {
        "session_id": "edit-" + str(int(time.time())),
        "repo": repo_path,
        "working_directory": repo_path,
        "model": model,
        "instruction": instruction,
        "edit_files": edit_files,
        "subtree_only": False,
        "cwd": repo_path,
    }

    try:
        from daoyoucode.agents.init import initialize_agent_system
        from daoyouco
```

[3] daoyoucode\agents\core\orchestrator.py (L22-30)

è´¨é‡: â­


ðŸ“ ç¬¦å·ä¿¡æ¯:

  - BaseOrchestrator

åˆ†æ•°: 0.282


```
    @abstractmethod
    async def execute(
        self,
        skill: 'SkillConfig',
        user_input: str,
        context: Optional[Dict[str, Any]] = None
    ) -> Dict[str, Any]:
        """æ‰§è¡ŒSkill"""
        pass
    

```