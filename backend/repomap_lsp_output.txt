# 代码地图 (Top 24 文件)
# (LSP增强: 包含类型签名和引用计数)

daoyoucode\agents\core\context.py:
  class ContextSnapshot (line 27)
  function to_dict (line 34)
  class ContextChange (line 45)
  function to_dict (line 53)
  class Context (line 64)
  function __init__ (line 75)
  function set (line 113)
  function get (line 132)
  function delete (line 153)
  function has (line 170)
  function update (line 188)
  function clear (line 199)
  function keys (line 213)
  function to_dict (line 224)
  function create_snapshot (line 239)
  function rollback_to_snapshot (line 266)
  function list_snapshots (line 301)
  function get_snapshot (line 305)
  function _record_change (line 314)
  function get_history (line 336)
  function get_changes_for_key (line 353)
  function create_child (line 368)
  class ContextManager (line 387)
  function __init__ (line 400)
  function create_context (line 425)
  function get_context (line 456)
  function get_or_create_context (line 468)
  function delete_context (line 483)
  function list_contexts (line 494)
  function get_stats (line 498)
  function _cleanup_old_contexts (line 525)
  function add_repo_map (line 544)
  function enforce_token_budget (line 601)
  function _estimate_tokens (line 683)
  function _sort_by_priority (line 692)
  function _binary_search_optimal_vars (line 723)
  function summarize_content (line 788)
  function auto_optimize_context (line 879)
  function get_context_manager (line 931)

daoyoucode\agents\core\hooks.py:
  class HookEvent (line 16)
  class HookContext (line 51)
  function get (line 57)
  function set (line 61)
  class Hook (line 66)
  function __init__ (line 69)
  function execute (line 80)
  function __repr__ (line 92)
  class FunctionHook (line 96)
  function __init__ (line 99)
  function execute (line 103)
  class HookManager (line 116)
  function __new__ (line 121)
  function __init__ (line 127)
  function register (line 135)
  function register_function (line 148)
  function unregister (line 168)
  function trigger (line 179)
  function list_hooks (line 224)
  function clear (line 243)
  function get_hook_manager (line 263)
  function hook (line 269)
  function decorator (line 279)
  class LoggingHook (line 287)
  function __init__ (line 290)
  function execute (line 293)
  class TimingHook (line 299)
  function __init__ (line 302)
  function execute (line 305)
  class ValidationHook (line 323)
  function __init__ (line 326)
  function execute (line 329)

daoyoucode\agents\core\orchestrator.py:
  class BaseOrchestrator (line 14)
  function __init__ (line 17)
  function execute (line 22)
  function _get_agent (line 31)
  function _apply_middleware (line 43)
  class OrchestratorRegistry (line 59)
  function __init__ (line 62)
  function register (line 66)
  function get (line 74)
  function list_orchestrators (line 85)
  function get_orchestrator_registry (line 94)
  function get_orchestrator (line 99)
  function register_orchestrator (line 104)

daoyoucode\agents\core\cache.py:
  class CacheEntry (line 17)
  function is_expired (line 23)
  class SimpleCache (line 28)
  function __init__ (line 45)
  function get (line 69)
  function set (line 102)
  function delete (line 126)
  function clear (line 144)
  function get_or_set (line 151)
  function _evict_oldest (line 180)
  function cleanup_expired (line 195)
  function get_stats (line 216)
  function __len__ (line 238)
  function __contains__ (line 242)
  class NamespacedCache (line 247)
  function __init__ (line 254)
  function _make_key (line 265)
  function get (line 269)
  function set (line 273)
  function delete (line 277)
  function get_or_set (line 281)
  function get_cache (line 295)
  function get_namespaced_cache (line 314)
  function get_profile_cache (line 329)
  function get_summary_cache (line 334)
  function get_history_cache (line 339)
  function get_preference_cache (line 344)

daoyoucode\agents\core\middleware.py:
  class BaseMiddleware (line 14)
  function __init__ (line 17)
  function process (line 22)
  class MiddlewareRegistry (line 31)
  function __init__ (line 34)
  function register (line 38)
  function get (line 46)
  function list_middleware (line 57)
  function get_middleware_registry (line 66)
  function get_middleware (line 71)
  function register_middleware (line 76)

cli\utils\config.py:
  class Config (line 12)
  function __init__ (line 15)
  function _load (line 24)
  function _default_config (line 33)
  function get (line 44)
  function set (line 48)
  function _save (line 53)
  function all (line 60)
  function reset (line 64)
  function get_config (line 74)

daoyoucode\agents\core\agent.py:
  class AgentConfig (line 16)
  class AgentResult (line 26)
  class BaseAgent (line 37)
  function __init__ (line 40)
  function get_user_profile (line 66)
  function _check_and_update_profile (line 85)
  function _update_user_profile_async (line 135)
  function execute_stream (line 175)
  function execute (line 325)
  function _load_prompt (line 588)
  function _load_prompt_from_file (line 603)
  function _render_prompt (line 617)
  function _call_llm (line 632)
  function _stream_llm (line 662)
  function _call_llm_with_tools (line 701)
  function _call_llm_with_functions (line 929)
  class AgentRegistry (line 981)
  function __init__ (line 984)
  function register (line 987)
  function get_agent (line 992)
  function list_agents (line 996)
  function get_agent_registry (line 1005)
  function register_agent (line 1010)

cli\commands\session.py:
  function list (line 15)
  function show (line 41)
  function delete (line 54)
  function main (line 67)

daoyoucode\agents\tools\base.py:
  class ToolContext (line 17)
  function __post_init__ (line 37)
  function should_include_path (line 50)
  function abs_path (line 83)
  function rel_path (line 103)
  function normalize_path (line 134)
  class ToolResult (line 150)
  class BaseTool (line 158)
  function __init__ (line 166)
  function set_context (line 173)
  function set_working_directory (line 180)
  function context (line 189)
  function resolve_path (line 196)
  function normalize_path (line 245)
  function execute (line 258)
  function get_function_schema (line 262)
  function truncate_output (line 278)
  function _truncate_by_chars (line 313)
  function _truncate_by_lines (line 345)
  class ToolRegistry (line 372)
  function __init__ (line 375)
  function set_context (line 380)
  function set_working_directory (line 389)
  function context (line 401)
  function register (line 408)
  function get_tool (line 418)
  function filter_tool_names (line 422)
  function list_tools (line 440)
  function get_function_schemas (line 444)
  function execute_tool (line 465)

daoyoucode\agents\tools\lsp_tools.py:
  class LSPServerConfig (line 30)
  class LSPClient (line 92)
  function __init__ (line 106)
  function is_server_installed (line 120)
  function start (line 125)
  function _read_stdout (line 161)
  function _read_stderr (line 177)
  function _reject_all_pending (line 192)
  function _process_buffer (line 199)
  function _handle_message (line 244)
  function _handle_server_request (line 270)
  function _send (line 286)
  function timeout_handler (line 315)
  function _notify (line 332)
  function _respond (line 351)
  function initialize (line 370)
  function open_file (line 437)
  function definition (line 470)
  function references (line 482)
  function document_symbols (line 495)
  function workspace_symbols (line 506)
  function diagnostics (line 511)
  function prepare_rename (line 535)
  function rename (line 547)
  function code_actions (line 560)
  function is_alive (line 583)
  function stop (line 591)
  class LSPServerManager (line 621)
  function __new__ (line 637)
  function __init__ (line 643)
  function is_server_installed (line 658)
  function ensure_server_available (line 663)
  function _get_server_config_for_language (line 722)
  function _print_installation_guide (line 738)
  function _start_cleanup_timer (line 791)
  function _cleanup_loop (line 802)
  function _cleanup_idle_clients (line 813)
  function _get_key (line 832)
  function find_server_for_extension (line 836)
  function get_client (line 847)
  function init_client (line 881)
  function release_client (line 907)
  function stop_all (line 917)
  function get_lsp_manager (line 934)
  function with_lsp_client (line 941)
  function format_location (line 979)
  class LSPDiagnosticsTool (line 1012)
  function __init__ (line 1019)
  function get_function_schema (line 1025)
  function execute (line 1048)
  class LSPGotoDefinitionTool (line 1145)
  function __init__ (line 1152)
  function get_function_schema (line 1158)
  function execute (line 1185)
  class LSPFindReferencesTool (line 1235)
  function __init__ (line 1242)
  function get_function_schema (line 1248)
  function execute (line 1280)
  class LSPSymbolsTool (line 1336)
  function __init__ (line 1343)
  function get_function_schema (line 1349)
  function execute (line 1381)
  class LSPRenameTool (line 1468)
  function __init__ (line 1475)
  function get_function_schema (line 1481)
  function execute (line 1512)
  class LSPCodeActionsTool (line 1594)
  function __init__ (line 1601)
  function get_function_schema (line 1607)
  function execute (line 1634)

daoyoucode\agents\core\permission.py:
  class PermissionRule (line 21)
  function matches (line 28)
  function __repr__ (line 32)
  class PermissionCategory (line 37)
  function add_rule (line 43)
  function check (line 50)
  class PermissionManager (line 63)
  function __new__ (line 68)
  function __init__ (line 74)
  function _init_default_permissions (line 83)
  function check_permission (line 227)
  function add_rule (line 256)
  function load_config (line 280)
  function get_category (line 305)
  function list_categories (line 309)
  function list_rules (line 313)
  function clear (line 332)
  function get_permission_manager (line 353)
  function check_permission (line 358)
  function require_permission (line 378)
  function decorator (line 388)
  function wrapper (line 389)

daoyoucode\agents\core\hook.py:
  class HookContext (line 16)
  function __post_init__ (line 23)
  class BaseHook (line 28)
  function __init__ (line 31)
  function on_before_execute (line 37)
  function on_after_execute (line 53)
  function on_error (line 71)
  function enable (line 88)
  function disable (line 93)
  class HookManager (line 99)
  function __init__ (line 102)
  function register (line 106)
  function unregister (line 111)
  function get_hook (line 116)
  function list_hooks (line 123)
  function run_before_hooks (line 127)
  function run_after_hooks (line 146)
  function run_error_hooks (line 166)
  function get_hook_manager (line 194)
  function register_hook (line 199)
  function unregister_hook (line 204)

daoyoucode\agents\tools\diff_tools.py:
  function levenshtein (line 19)
  class Replacer (line 52)
  function find_matches (line 56)
  class SimpleReplacer (line 61)
  function find_matches (line 65)
  class LineTrimmedReplacer (line 70)
  function find_matches (line 74)
  class BlockAnchorReplacer (line 101)
  function find_matches (line 115)
  class WhitespaceNormalizedReplacer (line 218)
  function normalize_whitespace (line 222)
  function find_matches (line 226)
  class IndentationFlexibleReplacer (line 244)
  function remove_indentation (line 248)
  function find_matches (line 266)
  class EscapeNormalizedReplacer (line 277)
  function unescape_string (line 281)
  function find_matches (line 298)
  class TrimmedBoundaryReplacer (line 314)
  function find_matches (line 318)
  class ContextAwareReplacer (line 336)
  function find_matches (line 340)
  class MultiOccurrenceReplacer (line 380)
  function find_matches (line 384)
  function replace (line 396)
  class SearchReplaceTool (line 460)
  function __init__ (line 463)
  function execute (line 469)
  function get_function_schema (line 521)
  function _parse_unified_diff (line 553)
  function _apply_hunk (line 607)
  class ApplyPatchTool (line 629)
  function __init__ (line 637)
  function execute (line 643)
  function get_function_schema (line 693)

daoyoucode\agents\llm\client_manager.py:
  class LLMClientManager (line 16)
  function __new__ (line 29)
  function __init__ (line 35)
  function configure_provider (line 64)
  function _get_next_api_key (line 101)
  function get_client (line 129)
  function _infer_provider (line 161)
  function record_usage (line 176)
  function get_stats (line 182)
  function close (line 198)
  function get_client_manager (line 204)

daoyoucode\agents\memory\storage.py:
  class MemoryStorage (line 23)
  function __init__ (line 34)
  function add_conversation (line 98)
  function get_conversation_history (line 135)
  function add_preference (line 150)
  function get_preferences (line 169)
  function add_task (line 181)
  function get_task_history (line 202)
  function get_shared_context (line 213)
  function update_shared_context (line 246)
  function clear_session (line 269)
  function save_summary (line 279)
  function get_summary (line 285)
  function save_key_info (line 291)
  function get_key_info (line 297)
  function save_user_profile (line 303)
  function get_user_profile (line 309)
  function _register_session (line 315)
  function get_user_sessions (line 333)
  function get_session_user (line 345)
  function get_stats (line 359)
  function _load_persistent_data (line 382)
  function _save_preferences (line 427)
  function _save_tasks (line 435)
  function _save_summaries (line 443)
  function _save_key_info (line 451)
  function _save_profiles (line 459)
  function _save_user_sessions (line 467)

daoyoucode\agents\tools\repomap_tools.py:
  class RepoMapTool (line 41)
  function __init__ (line 62)
  function get_function_schema (line 71)
  function get_definitions (line 115)
  function get_reference_graph (line 162)
  function get_pagerank_scores (line 189)
  function execute (line 231)
  function _init_cache (line 346)
  function _scan_repository (line 365)
  function _should_ignore (line 415)
  function _get_cached_definitions (line 438)
  function _cache_definitions (line 455)
  function _parse_file (line 463)
  function _get_scm_fname (line 583)
  function _compute_end_lines (line 603)
  function _build_reference_graph (line 648)
  function _pagerank (line 684)
  function _generate_map (line 787)
  function _enhance_with_lsp (line 864)
  class GetRepoStructureTool (line 977)
  function __init__ (line 1065)
  function get_function_schema (line 1071)
  function execute (line 1103)
  function _build_tree (line 1153)
  function _get_annotation (line 1196)
  class GetFileSymbolsTool (line 1212)
  function __init__ (line 1220)
  function execute (line 1226)
  function get_function_schema (line 1257)

cli\commands\config.py:
  function show (line 15)
  function set (line 37)
  function reset (line 60)
  function main (line 73)

daoyoucode\agents\core\session.py:
  class AgentSession (line 16)
  function __init__ (line 19)
  function execute (line 27)
  function get_age_hours (line 48)
  class SessionManager (line 53)
  function __new__ (line 58)
  function __init__ (line 64)
  function create_session (line 72)
  function execute (line 96)
  function get_session (line 122)
  function delete_session (line 126)
  function cleanup_old_sessions (line 134)
  function list_sessions (line 153)
  function get_session_manager (line 166)

tests\test_multi_branch.py:
  class SkillConfig (line 12)
  class MockAgent (line 34)
  function __init__ (line 35)
  function execute (line 43)
  function test_simple_branch (line 59)
  function test_multi_branch (line 99)
  function test_complex_conditions (line 178)
  function main (line 231)

tests\test_orchestrator_enhancements.py:
  class SkillConfig (line 18)
  class MockAgent (line 33)
  function __init__ (line 34)
  function execute (line 40)
  function test_simple_retry (line 68)
  function test_multi_agent_sequential (line 121)
  function test_multi_agent_parallel (line 151)
  function test_multi_agent_debate (line 180)
  function test_multi_agent_main_with_helpers (line 211)
  function main (line 238)

daoyoucode\agents\memory\manager.py:
  class MemoryManager (line 17)
  function __init__ (line 30)
  function add_conversation (line 66)
  function get_conversation_history (line 112)
  function is_followup (line 144)
  function remember_preference (line 155)
  function get_preferences (line 174)
  function add_task (line 203)
  function get_task_history (line 211)
  function get_shared_context (line 221)
  function update_shared_context (line 238)
  function create_shared_memory (line 261)
  function get_user_sessions (line 271)
  function get_session_user (line 283)
  function load_context_smart (line 297)
  function format_context_for_prompt (line 346)
  function clear_session (line 365)
  function get_stats (line 369)
  function get_memory_manager (line 384)

daoyoucode\agents\memory\conversation_tree.py:
  class ConversationNode (line 55)
  function __init__ (line 62)
  function _generate_branch_id (line 85)
  function to_dict (line 89)
  function from_dict (line 106)
  class ConversationTree (line 126)
  function __init__ (line 137)
  function add_conversation (line 164)
  function _detect_topic_switch (line 266)
  function _extract_keywords (line 340)
  function _update_topic_keywords (line 412)
  function _get_last_conversation_id (line 427)
  function get_branch_conversations (line 435)
  function get_relevant_conversations (line 468)
  function _get_current_branch_conversations (line 520)
  function _get_keyword_matched_conversations (line 524)
  function _get_tree_based_conversations (line 573)
  function get_tree_stats (line 631)
  function visualize (line 645)
  function export_visualization (line 659)
  function load_from_history (line 671)
  function export_to_history (line 706)
  function get_conversation_tree (line 729)

tests\test_placeholder_fix.py:
  class MockTool (line 14)
  function __init__ (line 17)
  function execute (line 23)
  function test_placeholder_detection (line 33)
  function test_agent_prompt (line 64)
  function main (line 113)

daoyoucode\agents\ui\tool_display.py:
  class ToolDisplay (line 22)
  function __init__ (line 25)
  function show_tool_start (line 28)
  function show_progress (line 49)
  class SimpleProgress (line 67)