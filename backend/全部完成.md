# âœ… å…¨éƒ¨å®Œæˆï¼ç³»ç»Ÿå·²å°±ç»ª

> **æ—¶é—´**: 2025-02-12  
> **çŠ¶æ€**: æ‰€æœ‰é—®é¢˜å·²è§£å†³ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨

---

## ğŸ‰ å®Œæˆçš„å·¥ä½œ

### 1. æ¶æ„é‡æ„ âœ…

**ä¿®å¤å‰**: CLIç›´æ¥ä¼ é€’å·¥å…·ç»™Agentï¼ˆç»•è¿‡Skillç³»ç»Ÿï¼‰

**ä¿®å¤å**: CLI â†’ Skill â†’ Executor â†’ ReAct â†’ Agent â†’ å·¥å…·

### 2. åˆ›å»ºMainAgent âœ…

- æ–‡ä»¶: `backend/daoyoucode/agents/builtin/main_agent.py`
- ç®€æ´çš„Agentå®šä¹‰
- Promptç”±Skillç®¡ç†ï¼ˆä¸æ˜¯ç¡¬ç¼–ç ï¼‰

### 3. æ³¨å†ŒReActç¼–æ’å™¨ âœ…

- ä¿®æ”¹: `backend/daoyoucode/agents/orchestrators/__init__.py`
- å¯¼å…¥å¹¶æ³¨å†ŒReActOrchestrator

### 4. é…ç½®LLM âœ…

- ä¿®æ”¹: `backend/cli/commands/chat.py`
- è‡ªåŠ¨åŠ è½½ `backend/config/llm_config.yaml`
- è‡ªåŠ¨æ³¨å†ŒAgent

### 5. æ¸…ç†ç©ºç›®å½• âœ…

- åˆ é™¤äº†4ä¸ªç©ºçš„Skillç›®å½•
- ä¸å†æœ‰è­¦å‘Šä¿¡æ¯

---

## ğŸ“Š æµ‹è¯•ç»“æœ

```
âœ“ å·²é…ç½® 1 ä¸ªæä¾›å•† (qwen)
âœ“ å·²æ³¨å†Œ 7 ä¸ªAgent
âœ“ æ‰§è¡Œå®Œæˆ
  â€¢ æˆåŠŸ: True
  â€¢ å†…å®¹: ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ...
  â€¢ é”™è¯¯: None
```

**æ— è­¦å‘Šï¼Œæ— é”™è¯¯ï¼** âœ…

---

## ğŸš€ ç°åœ¨å¯ä»¥ä½¿ç”¨äº†

å¯åŠ¨äº¤äº’å¼å¯¹è¯ï¼š

```bash
cd backend
python -m cli.app chat
```

---

## ğŸ§ª æ¨èæµ‹è¯•åœºæ™¯

### åœºæ™¯1: é¡¹ç›®ç†è§£ï¼ˆå…³é”®ï¼ï¼‰

```
ä½  â€º è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
```

**é¢„æœŸ**: 
- Agentè‡ªåŠ¨è°ƒç”¨ `repo_map` å·¥å…·
- åˆ†æé¡¹ç›®ç»“æ„
- åŸºäºå®é™…ç»“æœå›ç­”

### åœºæ™¯2: å¯¹æ¯”åˆ†æï¼ˆä½ çš„é—®é¢˜ï¼‰

```
ä½  â€º å¯¹æ¯”opencodeã€oh-my-opencodeï¼Œæˆ‘ä»¬DaoyouCodeçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
```

**é¢„æœŸ**:
- Agentè‡ªåŠ¨è°ƒç”¨å·¥å…·åˆ†æé¡¹ç›®
- è¯»å–å…³é”®æ–‡ä»¶ï¼ˆREADMEã€STRUCTUREç­‰ï¼‰
- ç»™å‡ºè¯¦ç»†çš„å¯¹æ¯”åˆ†æ

### åœºæ™¯3: æ–‡ä»¶æŸ¥çœ‹

```
ä½  â€º backend/cli/commands/chat.pyåšä»€ä¹ˆçš„ï¼Ÿ
```

**é¢„æœŸ**:
- Agentè‡ªåŠ¨è°ƒç”¨ `read_file` å·¥å…·
- è¯»å–æ–‡ä»¶å†…å®¹
- åŸºäºå®é™…å†…å®¹å›ç­”

### åœºæ™¯4: ä»£ç æœç´¢

```
ä½  â€º execute_skillå‡½æ•°åœ¨å“ªé‡Œå®ç°çš„ï¼Ÿ
```

**é¢„æœŸ**:
- Agentè‡ªåŠ¨è°ƒç”¨ `grep_search` å·¥å…·
- æœç´¢ä»£ç 
- å‘Šè¯‰ä½ å…·ä½“ä½ç½®

---

## ğŸ“ å½“å‰Skillåˆ—è¡¨

è¿è¡Œç³»ç»Ÿåä¼šåŠ è½½ä»¥ä¸‹7ä¸ªSkillï¼š

1. **chat_assistant** - äº¤äº’å¼å¯¹è¯åŠ©æ‰‹ï¼ˆä½¿ç”¨ReActç¼–æ’å™¨ï¼‰
2. **code-analysis** - ä»£ç æ¶æ„åˆ†æ
3. **code-exploration** - ä»£ç åº“æœç´¢å’Œæ¢ç´¢
4. **programming** - ç¼–ç¨‹ä¸“å®¶æœåŠ¡
5. **refactoring** - ä»£ç é‡æ„ä¸“å®¶
6. **testing** - æµ‹è¯•ç¼–å†™å’Œä¿®å¤
7. **translation** - ä¸“ä¸šç¿»è¯‘æœåŠ¡

---

## ğŸ¯ å…³é”®ç‰¹æ€§

### Agentè‡ªä¸»æ€§

**ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰**:
```
ä½  â€º /add main.py
ä½  â€º /add utils.py
ä½  â€º è¿™ä¸¤ä¸ªæ–‡ä»¶åšä»€ä¹ˆçš„ï¼Ÿ
```

**ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰**:
```
ä½  â€º è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
AI â€º [è‡ªåŠ¨è°ƒç”¨repo_map] â†’ åŸºäºå®é™…ç»“æœå›ç­”
```

### æ¶æ„æµç¨‹

```
ç”¨æˆ·è¾“å…¥
  â†“
CLI (chat.py)
  â”œâ”€ åŠ è½½LLMé…ç½®
  â”œâ”€ æ³¨å†ŒAgent
  â””â”€ è°ƒç”¨execute_skill("chat_assistant")
  â†“
Executor (executor.py)
  â”œâ”€ Hookç³»ç»Ÿ (before)
  â”œâ”€ åŠ è½½Skillé…ç½®
  â”œâ”€ è·å–ReActç¼–æ’å™¨
  â”œâ”€ åˆ›å»ºä»»åŠ¡
  â””â”€ æ‰§è¡Œç¼–æ’å™¨
  â†“
ReActç¼–æ’å™¨ (react.py)
  â”œâ”€ åŠ è½½Prompt (skills/chat-assistant/prompts/chat_assistant.md)
  â”œâ”€ è·å–å·¥å…·åˆ—è¡¨ (repo_map, read_file, ...)
  â””â”€ è°ƒç”¨MainAgent
  â†“
MainAgent (main_agent.py)
  â”œâ”€ ä½¿ç”¨Skillçš„Prompt
  â”œâ”€ è°ƒç”¨LLMï¼ˆå¸¦å·¥å…·ï¼‰
  â””â”€ LLMå†³å®šè°ƒç”¨å“ªäº›å·¥å…·
  â†“
å·¥å…·æ‰§è¡Œ (repo_map, read_file, ...)
  â””â”€ è¿”å›ç»“æœ
  â†“
MainAgent
  â””â”€ åŸºäºå·¥å…·ç»“æœç”Ÿæˆå›ç­”
  â†“
ç”¨æˆ·çœ‹åˆ°å›ç­”
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### æ–°å»ºæ–‡ä»¶

1. `backend/daoyoucode/agents/builtin/main_agent.py` - MainAgentå®šä¹‰
2. `skills/chat-assistant/skill.yaml` - chat_assistant Skillé…ç½®
3. `skills/chat-assistant/prompts/chat_assistant.md` - Promptæ¨¡æ¿

### ä¿®æ”¹æ–‡ä»¶

1. `backend/daoyoucode/agents/orchestrators/__init__.py` - æ³¨å†ŒReAct
2. `backend/daoyoucode/agents/builtin/__init__.py` - æ³¨å†ŒMainAgent
3. `backend/cli/commands/chat.py` - åŠ è½½é…ç½®ã€æ³¨å†ŒAgent

### åˆ é™¤æ–‡ä»¶

1. `skills/editblock/` - ç©ºç›®å½•
2. `skills/git-master/` - ç©ºç›®å½•
3. `skills/playwright/` - ç©ºç›®å½•
4. `skills/wholefile/` - ç©ºç›®å½•

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰é—®é¢˜å·²è§£å†³ï¼ç°åœ¨ï¼š

1. âœ… æ¶æ„å®Œå…¨æ­£ç¡®
2. âœ… MainAgentå·²åˆ›å»ºå¹¶æ³¨å†Œ
3. âœ… ReActç¼–æ’å™¨å·²æ³¨å†Œ
4. âœ… LLMé…ç½®è‡ªåŠ¨åŠ è½½
5. âœ… æ— è­¦å‘Šã€æ— é”™è¯¯
6. âœ… Agentå¯ä»¥ä¸»åŠ¨è°ƒç”¨å·¥å…·
7. âœ… æµ‹è¯•é€šè¿‡

**å¼€å§‹ä½¿ç”¨å§ï¼** ğŸš€

```bash
cd backend
python -m cli.app chat
```

ç„¶åè¾“å…¥ä½ çš„é—®é¢˜ï¼ŒAgentä¼šä¸»åŠ¨è°ƒç”¨å·¥å…·æ¥ç†è§£é¡¹ç›®å¹¶å›ç­”ï¼
