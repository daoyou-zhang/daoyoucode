# âœ… å·¥å…·æ‰§è¡Œè¿›åº¦å·²æ·»åŠ 

## ä¿®æ”¹å†…å®¹

åœ¨ `backend/daoyoucode/agents/core/agent.py` ä¸­æ·»åŠ äº†å·¥å…·æ‰§è¡Œè¿›åº¦æ˜¾ç¤ºï¼š

```python
# è§£æå·¥å…·è°ƒç”¨
tool_name = function_call['name']
tool_args = json.loads(function_call['arguments'])

print(f"\nğŸ”§ æ‰§è¡Œå·¥å…·: {tool_name}")  # â† æ–°å¢
print(f"   å‚æ•°: {tool_args}")         # â† æ–°å¢

# æ‰§è¡Œå·¥å…·
try:
    print(f"   â³ æ­£åœ¨æ‰§è¡Œ...")        # â† æ–°å¢
    tool_result = await tool_registry.execute_tool(tool_name, **tool_args)
    print(f"   âœ“ æ‰§è¡Œå®Œæˆ")            # â† æ–°å¢
except Exception as e:
    print(f"   âœ— æ‰§è¡Œå¤±è´¥: {e}")       # â† æ–°å¢
```

## ç°åœ¨çš„è¾“å‡º

å½“Agentè°ƒç”¨å·¥å…·æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
â ¸ AIæ­£åœ¨æ€è€ƒ...

ğŸ”§ æ‰§è¡Œå·¥å…·: repo_map
   å‚æ•°: {'repo_path': '.'}
   â³ æ­£åœ¨æ‰§è¡Œ...
   âœ“ æ‰§è¡Œå®Œæˆ

â ¸ AIæ­£åœ¨æ€è€ƒ...
```

## ç¤ºä¾‹åœºæ™¯

### åœºæ™¯1: å•ä¸ªå·¥å…·è°ƒç”¨

```
ä½  â€º è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ

â ¸ AIæ­£åœ¨æ€è€ƒ...

ğŸ”§ æ‰§è¡Œå·¥å…·: repo_map
   å‚æ•°: {'repo_path': '.', 'max_tokens': 2000}
   â³ æ­£åœ¨æ‰§è¡Œ...
   âœ“ æ‰§è¡Œå®Œæˆ

â ¸ AIæ­£åœ¨æ€è€ƒ...

AI â€º è¿™ä¸ªé¡¹ç›®æ˜¯DaoyouCodeï¼Œä¸€ä¸ªæ™ºèƒ½AIä»£ç åŠ©æ‰‹...
```

### åœºæ™¯2: å¤šä¸ªå·¥å…·è°ƒç”¨

```
ä½  â€º backend/cli/commands/chat.pyåšä»€ä¹ˆçš„ï¼Ÿ

â ¸ AIæ­£åœ¨æ€è€ƒ...

ğŸ”§ æ‰§è¡Œå·¥å…·: search_files
   å‚æ•°: {'pattern': 'chat.py', 'path': 'backend/cli/commands'}
   â³ æ­£åœ¨æ‰§è¡Œ...
   âœ“ æ‰§è¡Œå®Œæˆ

ğŸ”§ æ‰§è¡Œå·¥å…·: read_file
   å‚æ•°: {'file_path': 'backend/cli/commands/chat.py'}
   â³ æ­£åœ¨æ‰§è¡Œ...
   âœ“ æ‰§è¡Œå®Œæˆ

â ¸ AIæ­£åœ¨æ€è€ƒ...

AI â€º chat.pyæ˜¯äº¤äº’å¼å¯¹è¯å‘½ä»¤çš„å®ç°...
```

### åœºæ™¯3: å·¥å…·æ‰§è¡Œå¤±è´¥

```
ğŸ”§ æ‰§è¡Œå·¥å…·: repo_map
   å‚æ•°: {'repo_path': '/invalid/path'}
   â³ æ­£åœ¨æ‰§è¡Œ...
   âœ— æ‰§è¡Œå¤±è´¥: Path not found: /invalid/path

â ¸ AIæ­£åœ¨æ€è€ƒ...

AI â€º æŠ±æ­‰ï¼Œæ— æ³•è®¿é—®æŒ‡å®šçš„è·¯å¾„...
```

## è¿›åº¦ä¿¡æ¯è¯´æ˜

| ç¬¦å· | å«ä¹‰ |
|------|------|
| ğŸ”§ | å¼€å§‹æ‰§è¡Œå·¥å…· |
| â³ | æ­£åœ¨æ‰§è¡Œä¸­ |
| âœ“ | æ‰§è¡ŒæˆåŠŸ |
| âœ— | æ‰§è¡Œå¤±è´¥ |
| â ¸ | AIæ­£åœ¨æ€è€ƒï¼ˆåˆ†æç»“æœï¼‰ |

## æµ‹è¯•

ç°åœ¨å¯ä»¥æµ‹è¯•äº†ï¼š

```bash
cd backend
python -m cli.app chat
```

ç„¶åè¾“å…¥ï¼š
```
ä½  â€º è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
```

ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
1. Agentå†³å®šè°ƒç”¨å·¥å…·
2. æ˜¾ç¤ºå·¥å…·åç§°å’Œå‚æ•°
3. æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦
4. æ˜¾ç¤ºæ‰§è¡Œç»“æœ
5. AgentåŸºäºç»“æœç”Ÿæˆå›ç­”

## å¦‚æœéœ€è¦æ›´è¯¦ç»†çš„è¿›åº¦

å¦‚æœ `repo_map` å·¥å…·æ‰§è¡Œæ—¶é—´å¾ˆé•¿ï¼Œå¯ä»¥åœ¨å·¥å…·å†…éƒ¨æ·»åŠ æ›´è¯¦ç»†çš„è¿›åº¦æ˜¾ç¤ºã€‚ä¾‹å¦‚ï¼š

```python
# backend/daoyoucode/agents/tools/repomap_tools.py
async def execute(self, repo_path, ...):
    print("   ğŸ“ æ‰«ææ–‡ä»¶...")
    # æ‰«æä»£ç 
    
    print("   ğŸ” è§£æä»£ç ...")
    # è§£æä»£ç 
    
    print("   ğŸ“Š è®¡ç®—æ’å...")
    # PageRank
    
    print("   âœ“ ç”Ÿæˆå®Œæˆ")
    return result
```

ä½†ç›®å‰çš„è¿›åº¦æ˜¾ç¤ºåº”è¯¥å·²ç»è¶³å¤Ÿäº†ã€‚

å¼€å§‹æµ‹è¯•å§ï¼ğŸš€
