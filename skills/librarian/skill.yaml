name: librarian
version: 1.0.0
description: æ–‡æ¡£å’Œä»£ç æœç´¢Agent - ä¸“æ³¨äºä¿¡æ¯æ£€ç´¢å’ŒçŸ¥è¯†æœç´¢

# ä½¿ç”¨ç®€å•ç¼–æ’å™¨
orchestrator: react

# ä½¿ç”¨Librarian Agent
agent: librarian

# Prompté…ç½®
prompt:
  file: prompts/librarian.md

# LLMé…ç½®
llm:
  model: qwen-max
  temperature: 0.1
  max_tokens: 4000

# å·¥å…·é…ç½®ï¼ˆåç§°ä¸ registry ä¸€è‡´ï¼‰
tools:
  - repo_map
  - get_repo_structure
  - read_file
  - batch_read_files      # ğŸ†• æ‰¹é‡è¯»å–æ–‡ä»¶
  - text_search
  - regex_search
  - get_file_symbols
  - lsp_find_references
  - lsp_symbols

# ä¸­é—´ä»¶
middleware:
  - context_management

# æƒé™é…ç½®ï¼ˆåªè¯»ï¼‰
permissions:
  read:
    - pattern: "*"
      permission: allow
  write:
    - pattern: "*"
      permission: deny  # ç¦æ­¢å†™å…¥
  execute:
    - pattern: "*"
      permission: deny  # ç¦æ­¢æ‰§è¡Œ

# è¾“å…¥
inputs:
  - name: search_query
    type: string
    required: true
    description: æœç´¢æŸ¥è¯¢ï¼ˆæ–‡æ¡£ã€ä»£ç ã€ç¤ºä¾‹ç­‰ï¼‰
  
  - name: search_scope
    type: string
    required: false
    description: æœç´¢èŒƒå›´ï¼ˆproject/docs/code/allï¼‰
    default: all

# è¾“å‡º
outputs:
  - name: search_results
    type: array
    description: æœç´¢ç»“æœåˆ—è¡¨
  
  - name: relevant_files
    type: array
    description: ç›¸å…³æ–‡ä»¶åˆ—è¡¨
  
  - name: code_examples
    type: array
    description: ä»£ç ç¤ºä¾‹åˆ—è¡¨

# Hooké…ç½®
hooks:
  - logging
  - metrics

# å…ƒæ•°æ®
metadata:
  category: search
  cost: MEDIUM
  triggers:
    - "æŸ¥æ‰¾"
    - "æœç´¢"
    - "æ–‡æ¡£"
    - "ç¤ºä¾‹"
    - "å‚è€ƒ"
  use_when:
    - "æŸ¥æ‰¾æ–‡æ¡£"
    - "æœç´¢ä»£ç ç¤ºä¾‹"
    - "äº†è§£æœ€ä½³å®è·µ"
    - "å­¦ä¹ æ–°æŠ€æœ¯"
    - "æŸ¥æ‰¾APIç”¨æ³•"
  features:
    - "æ™ºèƒ½æœç´¢"
    - "ä»£ç å®šä½"
    - "æ–‡æ¡£æ£€ç´¢"
    - "ç¤ºä¾‹æŸ¥æ‰¾"
  
  # å·¥ä½œæµè¯´æ˜
  workflow: |
    1. ç†è§£æœç´¢æ„å›¾
    2. é€‰æ‹©åˆé€‚çš„æœç´¢ç­–ç•¥
    3. æ‰§è¡Œæœç´¢
    4. è¿‡æ»¤å’Œæ’åºç»“æœ
    5. æä¾›ç›¸å…³ä¸Šä¸‹æ–‡
    
    ç¤ºä¾‹ï¼š
    ç”¨æˆ·ï¼š"å¦‚ä½•ä½¿ç”¨Agentçš„å·¥å…·ï¼Ÿ"
    
    Librarianæ‰§è¡Œï¼š
    1. text_search "tool" "agent"
    2. find_function "call_tool"
    3. read_file ç›¸å…³æ–‡ä»¶
    4. æä¾›ç¤ºä¾‹å’Œæ–‡æ¡£é“¾æ¥
