name: sisyphus-orchestrator
version: 1.0.0
description: ä¸»ç¼–æ’Agent - æ™ºèƒ½ä»»åŠ¡åˆ†è§£å’Œå¤šAgentè°ƒåº¦ï¼ˆç±»ä¼¼Sisyphusï¼‰

# ä½¿ç”¨å¤šAgentç¼–æ’å™¨
orchestrator: multi_agent
collaboration_mode: main_with_helpers

# Agentåˆ—è¡¨ï¼ˆä¸»Agent + è¾…åŠ©Agentï¼‰
agents:
  - sisyphus            # ä¸»ç¼–æ’Agentï¼ˆä»»åŠ¡åˆ†è§£å’Œè°ƒåº¦ï¼‰
  - code_analyzer       # è¾…åŠ©ï¼šæ¶æ„åˆ†æå’ŒæŠ€æœ¯å’¨è¯¢
  - programmer          # è¾…åŠ©ï¼šä»£ç ç¼–å†™
  - refactor_master     # è¾…åŠ©ï¼šä»£ç é‡æ„
  - test_expert         # è¾…åŠ©ï¼šæµ‹è¯•ç¼–å†™

# Prompté…ç½®
prompt:
  file: prompts/sisyphus.md  # ç®€æ´ç‰ˆæœ¬

# äº†è§£é¡¹ç›®é¢„å–ï¼šç”¨ LLM æ„å›¾åˆ¤æ–­ï¼Œé¿å…æ­»å…³é”®è¯æ¼æ‰ã€Œç†è§£ä¸‹å½“å‰é¡¹ç›®ã€ç­‰è¯´æ³•
project_understanding_use_intent: true

# LLMé…ç½®
llm:
  model: qwen-max
  temperature: 0.3
  max_tokens: 8000

# é»˜è®¤å·¥å…·ï¼ˆæœªåœ¨ agent_tools ä¸­åˆ—å‡ºçš„ Agent ä½¿ç”¨ï¼‰
tools:
  - repo_map
  - get_repo_structure
  - text_search
  - read_file
  - batch_read_files      # ğŸ†• æ‰¹é‡è¯»å–æ–‡ä»¶

# æŒ‰ Agent åˆ†é…å·¥å…·ï¼ˆæœ€ä¼˜è°ƒåº¦ï¼šå„æ™ºèƒ½ä½“ä»…è·å¾—å…¶èŒè´£æ‰€éœ€å·¥å…·ï¼‰
agent_tools:
  sisyphus:           # ä¸»ç¼–æ’ï¼šç†è§£ã€åè°ƒã€æ‰§è¡Œ
    - discover_project_docs  # ğŸ†• äº†è§£é¡¹ç›®
    - repo_map
    - get_repo_structure
    - text_search
    - regex_search           # ğŸ†• æ­£åˆ™æœç´¢
    - semantic_code_search   # ğŸ†• è¯­ä¹‰æœç´¢
    - read_file
    - batch_read_files
    - write_file             # ğŸ†• å†™æ–‡ä»¶
    - batch_write_files      # ğŸ†• æ‰¹é‡å†™æ–‡ä»¶
    - list_files             # ğŸ†• åˆ—å‡ºæ–‡ä»¶
    - search_replace         # ğŸ†• æœç´¢æ›¿æ¢
    - get_file_symbols       # ğŸ†• è·å–ç¬¦å·
    - git_status             # ğŸ†• Git çŠ¶æ€
    - git_diff               # ğŸ†• Git diff
  code_analyzer:      # æ¶æ„åˆ†æï¼šè¯» + åœ°å›¾ + LSP/ç¬¦å·
    - read_file
    - batch_read_files
    - repo_map
    - get_repo_structure
    - text_search
    - regex_search
    - get_file_symbols
    - lsp_diagnostics
    - lsp_find_references
    - lsp_symbols
  programmer:         # ç¼–ç¨‹ï¼šè¯»å†™ + æœç´¢ + Git + ç¼–è¾‘
    - read_file
    - batch_read_files
    - write_file
    - batch_write_files
    - list_files
    - get_file_info
    - text_search
    - regex_search
    - get_file_symbols
    - git_status
    - git_diff
    - search_replace
  refactor_master:    # é‡æ„ï¼šè¯»å†™ + æœç´¢ + ç¼–è¾‘ + Git
    - read_file
    - batch_read_files
    - write_file
    - batch_write_files
    - list_files
    - text_search
    - regex_search
    - search_replace
    - get_file_symbols
    - git_status
    - git_diff
  test_expert:        # æµ‹è¯•ï¼šè¯»å†™ + æœç´¢ + è¿è¡Œæµ‹è¯•/ lint
    - read_file
    - batch_read_files
    - write_file
    - batch_write_files
    - list_files
    - text_search
    - run_test
    - run_lint

# ä¸­é—´ä»¶
middleware:
  - context_management
  - memory_integration

# æƒé™
permissions:
  read:
    - pattern: "*"
      permission: allow
  write:
    - pattern: "*"
      permission: ask
  execute:
    - pattern: "*"
      permission: ask

# è¾“å…¥
inputs:
  - name: user_request
    type: string
    required: true
    description: ç”¨æˆ·çš„å¤æ‚ä»»åŠ¡è¯·æ±‚
  
  - name: session_id
    type: string
    required: false
    description: ä¼šè¯ID
  
  - name: repo
    type: string
    required: false
    description: ä»“åº“è·¯å¾„

# è¾“å‡º
outputs:
  - name: task_plan
    type: string
    description: ä»»åŠ¡åˆ†è§£è®¡åˆ’
  
  - name: execution_result
    type: string
    description: æ‰§è¡Œç»“æœ
  
  - name: agents_used
    type: array
    description: ä½¿ç”¨çš„Agentåˆ—è¡¨
  
  - name: helper_results
    type: array
    description: è¾…åŠ©Agentçš„ç»“æœ

# Hooké…ç½®
hooks:
  - logging
  - metrics
  - memory_save

# å…ƒæ•°æ®
metadata:
  category: orchestrator
  cost: HIGH
  triggers:
    - "å¤æ‚ä»»åŠ¡"
    - "å¤šæ­¥éª¤ä»»åŠ¡"
    - "éœ€è¦å¤šä¸ªä¸“ä¸šé¢†åŸŸ"
  use_when:
    - "é‡æ„ + æµ‹è¯•"
    - "åˆ†æ + ä¼˜åŒ–"
    - "æ¢ç´¢ + ç¼–å†™"
    - "å¤šæ–‡ä»¶ä¿®æ”¹"
  features:
    - "æ™ºèƒ½ä»»åŠ¡åˆ†è§£"
    - "å¤šAgentåä½œ"
    - "å¹¶è¡Œæ‰§è¡Œ"
    - "ç»“æœèšåˆ"
  
  # å·¥ä½œæµè¯´æ˜
  workflow: |
    1. ä¸»Agentåˆ†æç”¨æˆ·è¯·æ±‚
    2. åˆ†è§£ä¸ºå­ä»»åŠ¡
    3. å¹¶è¡Œè°ƒç”¨è¾…åŠ©Agentï¼ˆå¦‚æœå¯ä»¥ï¼‰
    4. ä¸»Agentçœ‹åˆ°è¾…åŠ©Agentçš„ç»“æœ
    5. èšåˆç»“æœè¿”å›ç”¨æˆ·
    
    ç¤ºä¾‹ï¼š
    ç”¨æˆ·ï¼š"é‡æ„ç™»å½•æ¨¡å—ï¼Œæ·»åŠ æµ‹è¯•"
    
    ä¸»Agentåˆ†æï¼š
    - éœ€è¦code_analyzeråˆ†ææ¶æ„
    - éœ€è¦refactor_masteræ‰§è¡Œé‡æ„
    - éœ€è¦test_expertç¼–å†™æµ‹è¯•
    
    æ‰§è¡Œæµç¨‹ï¼š
    1. code_analyzerå¹¶è¡Œæ‰§è¡Œ â†’ åˆ†æç™»å½•æ¨¡å—æ¶æ„
    2. ä¸»Agentçœ‹åˆ°åˆ†æç»“æœ
    3. è°ƒç”¨refactor_master â†’ æ‰§è¡Œé‡æ„
    4. è°ƒç”¨test_expert â†’ ç¼–å†™æµ‹è¯•
    5. ä¸»Agentèšåˆç»“æœ â†’ è¿”å›ç”¨æˆ·
